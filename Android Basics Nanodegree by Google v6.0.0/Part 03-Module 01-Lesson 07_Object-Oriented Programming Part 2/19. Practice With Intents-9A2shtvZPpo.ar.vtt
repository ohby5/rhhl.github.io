WEBVTT
Kind: captions
Language: ar

00:00:00.530 --> 00:00:03.719
نأمل أن تكون حظيت بفرصة
لتجرب استخدام أغراض مختلفة

00:00:03.719 --> 00:00:05.187
من دليل الأغراض الشائعة

00:00:06.110 --> 00:00:09.751
على سبيل المثال، فقد أريتكم سابقاً
أنني عدلت الوظيفة submitOrder

00:00:10.050 --> 00:00:14.313
حيث حولت الكود الموجود إلى تعليق
ثم أضفت كود غرض الخرائط

00:00:14.993 --> 00:00:18.149
حين أشغل التطبيق على جهازي،
عند النقر على زر الطلب

00:00:18.337 --> 00:00:22.521
فبدلاً من تحديث ملخص الطلب،
سيرسل فعلياً غرض لتطبيق الخرائط

00:00:23.510 --> 00:00:27.301
يتلقى تطبيق خرائط Google الغرض
ثم يقوم بتحديث الخريطة

00:00:27.420 --> 00:00:30.515
لتعرض الموقع الذي طلبناه في الغرض

00:00:31.172 --> 00:00:35.220
حتى لو كان استخدام هذه الأغراض
لا معنى له في سياق تطبيقنا لطلب القهوة

00:00:35.531 --> 00:00:38.258
فهو مكان جيد لممارسة إنشاء الأغراض

00:00:38.756 --> 00:00:41.765
فلنتراجع عن هذا التغيير
ثم نعود إلى مهامنا الحقيقية

00:00:42.691 --> 00:00:44.382
لإضافة هذه الميزة إلى تطبيقنا

00:00:44.608 --> 00:00:47.912
نحتاج إلى استخدام غرض لإرسال
ملخص الطلب إلى تطبيق البريد الإلكتروني

00:00:48.434 --> 00:00:51.783
إذا لم يكن لديك فكرة عن كيفية تحقيق ذلك،
يمكنك البحث على الويب

00:00:52.366 --> 00:00:55.073
لقد بحثت عن email intent android

00:00:55.309 --> 00:00:59.150
مجموعة من الروابط المفيدة ظهرت مثل منشور
على موقع stack overflow ودرس تعليمي

00:00:59.465 --> 00:01:01.238
ولكن دليل الأغراض الشائعة قد ظهر

00:01:01.420 --> 00:01:04.500
وحيث أنه من مستندات توثيق أندرويد الرسمية،
فسأنقر عليه

00:01:05.297 --> 00:01:08.870
في الجانب هنا هناك رابط حول كيفية
إنشاء غرض البريد الإلكتروني

00:01:09.210 --> 00:01:09.986
لذا سأنقر عليه

00:01:10.582 --> 00:01:14.471
هذا يريك كيف ترسل غرض
لإنشاء رسالة إلكترونية مع مرفقات اختيارية

00:01:14.850 --> 00:01:17.723
بالنظر في مستندات التوثيق
يوجد مثالان للكود

00:01:18.086 --> 00:01:21.769
بعد قراءة هذا التعليق
يبدو أننا نريد هذا المثال الثاني للكود

00:01:22.230 --> 00:01:25.227
هذا لأننا نريد أن يتم التعامل مع غرضنا
فقط عن طريق تطبيق البريد الإلكتروني

00:01:25.558 --> 00:01:28.098
وليس عن طريق الرسائل النصية أو
تطبيق تواصل اجتماعي

00:01:28.715 --> 00:01:30.596
فلنختر هذا الكود وننسخه

00:01:30.921 --> 00:01:32.390
ثم سنلصقه في تطبيقنا

00:01:33.570 --> 00:01:35.340
بمعاينة الكود في تطبيق JustJava

00:01:35.586 --> 00:01:37.743
أين ينبغي أن نلصق مقطع الكود هذا؟

00:01:38.479 --> 00:01:41.630
حسناً، نحن نريد أن نرسل ملخص الطلب
إلى تطبيق البريد الإلكتروني

00:01:41.961 --> 00:01:44.080
بمجرد أن نحصل على ملخص الطلب الكامل

00:01:44.632 --> 00:01:48.451
والمكان الذي به ملخص الطلب الكامل
هو بعد هذا السطر من الكود هنا

00:01:48.641 --> 00:01:52.733
والذي ينشيء ملخص الطلب ثم يخزنه
في متغير سلسلة حروف يسمى priceMessage

00:01:53.064 --> 00:01:56.880
لذلك سأضيف سطر جديد هنا،
ثم أدخل الكود

00:01:57.838 --> 00:02:00.092
لاحظ كيف نقوم بإنشاء كائن غرض جديد

00:02:00.342 --> 00:02:03.160
باستخدام منشئ
مع الكلمة المفتاحية في جافا new

00:02:03.680 --> 00:02:06.967
نحن نمرر وسيط واحد كمدخل إلى المنشئ

00:02:07.132 --> 00:02:09.187
لتهيئة كائن الغرض هذا

00:02:09.470 --> 00:02:14.240
الوسيط هو هذا الثابت المسمى
Intent.ACTION_SENDTO

00:02:14.710 --> 00:02:18.189
تذكر اتفاقنا أنه حين ترى شيئاً
كل حروفه كبيرة في جافا

00:02:18.465 --> 00:02:19.735
فهذا يعني أنه ثابت

00:02:20.074 --> 00:02:24.090
والثابت هو المتغير الذي يجب
ألا تتغير محتوياته أبداً بمجرد تعيينها

00:02:24.659 --> 00:02:26.913
في هذه الحالة عندما ننشيء غرضنا

00:02:27.205 --> 00:02:30.933
فنحن نستخدم إجراء الغرض الرسمي
ACTION_SENDTO

00:02:31.179 --> 00:02:33.709
والمعرف كثابت في فئة الغرض

00:02:34.460 --> 00:02:37.516
ثم نستدعي بعض الوظائف على
كائن الغرض الذي تم إنشاؤه حديثاً

00:02:38.030 --> 00:02:41.965
نعد البيانات لتكون URI بهذا التنسيق
كلمة mailto ثم نقطتان

00:02:42.759 --> 00:02:45.399
بهذه الطريقة فقط تطبيق البريد الإلكتروني
سيتعامل مع هذا الغرض

00:02:46.010 --> 00:02:48.434
ثم نضيف بعض البيانات الإضافية في الغرض

00:02:49.099 --> 00:02:54.145
لسنا بحاجة لتحديد الحقل (إلى) في
هذه الرسالة لذا سأحذف هذا السطر

00:02:55.000 --> 00:02:58.458
ولكننا نرغب في تحديد موضوع
رسالة البريد الإلكتروني

00:02:58.800 --> 00:03:01.765
لذلك سأستبدل هذا بسطر موضوع فعلي

00:03:03.240 --> 00:03:08.589
طلب JustJava الخاص بـ...
ثم أضيف اسم الشخص

00:03:09.440 --> 00:03:13.693
ثم هذه السطور التالية من الكود تتحقق
إذا كان هناك نشاط على الجهاز

00:03:13.940 --> 00:03:15.217
للتعامل مع هذه الغرض

00:03:16.140 --> 00:03:16.938
إذا كان هناك نشاط

00:03:17.192 --> 00:03:21.478
إذن الوضع آمن لإرسال الغرض ونستدعي
startActivity باستخدام هذا الغرض

00:03:22.365 --> 00:03:25.111
إذا لم يكن هناك نشاط على
الجهاز للتعامل مع الغرض

00:03:25.330 --> 00:03:29.061
فسنتخطى هذا المقطع من الكود
ونتخطى إرسال الغرض

00:03:30.599 --> 00:03:32.027
الآن، فلنشغل التطبيق على جهازنا

00:03:33.247 --> 00:03:34.636
الآن عند النقر على زر الطلب

00:03:34.824 --> 00:03:37.769
فإنه يرسل غرض إلى
تطبيق البريد الإلكتروني على الجهاز

00:03:38.190 --> 00:03:41.386
بشكل افتراضي،
سيتعامل تطبيق Gmail مع هذا الغرض

00:03:42.003 --> 00:03:44.806
في الكود حيث حددت سطر موضوع مخصص

00:03:45.121 --> 00:03:48.545
إنه يظهر هنا كالتالي
طلب JustJava الخاص بـ(كابتن كانال)

00:03:48.606 --> 00:03:50.979
وهو الاسم الذي أدخلته في التطبيق

00:03:51.850 --> 00:03:55.652
الآن، سؤال الاختبار الأصلي طلب منا
ملء سطر موضوع رسالة البريد الإلكتروني

00:03:55.817 --> 00:03:58.269
وكذلك نص الرسالة بملخص الطلب

00:03:58.442 --> 00:03:59.672
لذا فلنفعل ذلك الآن

00:04:00.321 --> 00:04:03.122
بمعاينة مستندات توثيق
غرض البريد الإلكتروني

00:04:03.445 --> 00:04:06.330
سأمرر لأعلى للنظر في إضافات الغرض

00:04:07.550 --> 00:04:09.288
نحتاج لإضافة ملحق غرض

00:04:09.421 --> 00:04:13.110
لكل جزء إضافي من المعلومات
نريد أن نقدمه عن رسالة البريد الإلكتروني

00:04:13.507 --> 00:04:17.394
على سبيل المثال، قد يكون لدينا ملحق غرض
حول متلقي رسالة البريد الإلكتروني

00:04:17.686 --> 00:04:20.892
ويمكن أن يكون لدينا ملحق غرض حول
سطر الموضوع في رسالة البريد الإلكتروني

00:04:21.796 --> 00:04:23.050
ولكن هذا هو ما نريده حقاً

00:04:23.318 --> 00:04:27.471
نريد إضافة ملحق غرض
لتحديد نص الرسالة الإلكترونية

00:04:28.138 --> 00:04:33.913
مرة أخرى، Intent.EXTRA_TEXT هو
ثابت ومعرف في فئة الغرض في جافا

00:04:34.270 --> 00:04:36.191
إذا نقرت عليه سترى المزيد من المعلومات

00:04:37.094 --> 00:04:40.189
إنه معرف كسلسلة حروف في فئة الغرض

00:04:40.663 --> 00:04:43.584
والقيمة الثابتة هي هذه السلسلة هنا

00:04:44.518 --> 00:04:47.287
في التطبيق JustJava عندما ننشيء الغرض

00:04:47.483 --> 00:04:51.706
فسوف نملأ هذا الملحق الذي يحتوي
على نص الرسالة الإلكترونية

00:04:52.506 --> 00:04:54.492
عندما يتلقى تطبيق البريد الإلكتروني الغرض

00:04:54.665 --> 00:04:58.720
سيعرف أنه يجب أن يبحث عن ملحق الغرض هذا
للعثور على نص الرسالة الإلكترونية

00:04:58.887 --> 00:05:01.680
ثم يمكنه نشر هذا في واجهة المستخدم

00:05:02.363 --> 00:05:03.831
فلنقم بهذا التغيير في الكود الآن

00:05:04.561 --> 00:05:06.260
سأختر هذا السطر من الكود

00:05:06.504 --> 00:05:10.933
الذي يضع ملحق غرض واحد
خاص بموضوع الرسالة الإلكترونية

00:05:11.375 --> 00:05:13.121
في السطر التالي، سألصق الكود

00:05:13.809 --> 00:05:17.016
الآن نحن نضع ملحق ثانٍ في الغرض

00:05:18.141 --> 00:05:24.098
سيستجيب الملحق لـ Intent.EXTRA_TEXT

00:05:25.374 --> 00:05:28.017
حتى نعلم أنه لنص الرسالة الإلكترونية

00:05:28.778 --> 00:05:33.629
الوسيط الثاني لهذه الوظيفة
سيكون النص الفعلي للرسالة الإلكترونية

00:05:34.962 --> 00:05:37.526
يجب أن يحتوي نص الرسالة الإلكترونية
على ملخص الطلب فقط

00:05:37.764 --> 00:05:42.190
وهذا مخزن في priceMessage
لذا أستطيع نسخ هذا المتغير إلى هنا

00:05:44.930 --> 00:05:45.629
للتلخيص

00:05:45.833 --> 00:05:50.890
بالنسبة إلى كائن الغرض نستدعي وظيفة
putExtra لتحديد موضوع الرسالة الإلكترونية

00:05:52.380 --> 00:05:55.670
وفي نفس كائن الغرض نستدعي
الوظيفة putExtra مرة أخرى

00:05:55.890 --> 00:05:58.019
لتحديد نص الرسالة الإلكترونية

00:05:58.414 --> 00:06:00.684
ونص الرسالة الإلكترونية هو ملخص الطلب

00:06:01.428 --> 00:06:02.857
الآن فلنشغل التطبيق على جهازنا

00:06:04.022 --> 00:06:06.799
بمجرد استكمال الطلب،
يمكنني النقر على الزر للإرسال

00:06:07.585 --> 00:06:10.854
نرسل غرض إلى تطبيق البريد الإلكتروني
مع موضوع الرسالة الإلكترونية المكتوب

00:06:10.996 --> 00:06:12.482
وها هو ملخص الطلب يظهر الآن

00:06:14.760 --> 00:06:17.458
في الخطوة الثالثة من هذه المهمة
سنحذف الكود

00:06:17.483 --> 00:06:20.099
الذي يعرض ملخص الطلب في تطبيق JustJava

00:06:20.497 --> 00:06:22.272
لأنه الآن سيظهر في تطبيق البريد الإلكتروني

00:06:23.070 --> 00:06:25.353
سأبدأ بتعديل مخطط النشاط الرئيسي

00:06:25.556 --> 00:06:27.573
لحذف الواجهات النصية لملخص الطلب

00:06:28.510 --> 00:06:31.142
في الجزء السفلي من المخطط، سأحذف العنوان

00:06:31.321 --> 00:06:34.051
وكذلك TextView التي ستظهر
ملخص الطلب الفعلي

00:06:34.654 --> 00:06:36.760
أنا ذاهب لإنقاذ ذلك
والتبديل إلى ملف جافا.

00:06:37.735 --> 00:06:42.212
في ملف الجافا للنشاط الرئيسي، لم أعد
بحاجة إلى وظيفة displayMessage هذه

00:06:42.458 --> 00:06:44.413
والتي من شأنها تحديث TextView ملخص الطلب

00:06:44.722 --> 00:06:47.857
لأن هذه الواجهة بهذا المعرف لم تعد موجودة

00:06:52.607 --> 00:06:56.456
حيث إنني حذفت الوظيفة displayMessage،
ظهر خطأ في أندرويد استوديو الآن

00:06:56.692 --> 00:06:59.870
يقول أن هذه الوظيفة غير موجودة،
لذا سأقوم بحذف هذا

00:07:01.090 --> 00:07:04.608
لو راجعنا الكود سنجد هذا أمر منطقي
لأننا عندما نضغط على زر الطلب

00:07:04.886 --> 00:07:06.441
فسيستدعي الوظيفة submitOrder

00:07:06.680 --> 00:07:10.860
ثم ينفذ كل هذا الكود، والذي يرسل
أيضاً غرض إلى تطبيق البريد الإلكتروني

00:07:11.610 --> 00:07:15.423
ليس هناك حاجة لعرض ملخص الطلب
داخل تطبيقنا بعد ذلك

00:07:16.030 --> 00:07:17.651
فلنتحقق من أن التطبيق لا يزال يعمل

00:07:18.400 --> 00:07:20.040
عند حذف كميات كبيرة من الكود

00:07:20.065 --> 00:07:22.231
فمن الأسهل التحقق على الفور أنه يعمل

00:07:22.562 --> 00:07:24.496
والتراجع عن التغييرات
إذا كان هناك خطأ،

00:07:24.774 --> 00:07:26.650
بدلاً من محاولة العثور عليها لاحقاً

00:07:29.045 --> 00:07:30.259
والتطبيق لا يزال يعمل

00:07:30.852 --> 00:07:31.513
عمل رائع

00:07:31.797 --> 00:07:34.130
لقد قمت بإضافة غرض إلى تطبيق JustJava

00:07:34.842 --> 00:07:37.058
الأغراض هي أحد الأجزاء الأساسية في أندرويد

00:07:37.342 --> 00:07:40.866
ولكن لا يزال هناك الكثير من مكونات
أندرويد يمكنها مساعدتك لإنشاء تطبيقات أفضل

00:07:41.198 --> 00:07:44.404
أنصح بأن تلقي نظرة عليهم بنفسك
بعد الانتهاء من هذه الدورة

