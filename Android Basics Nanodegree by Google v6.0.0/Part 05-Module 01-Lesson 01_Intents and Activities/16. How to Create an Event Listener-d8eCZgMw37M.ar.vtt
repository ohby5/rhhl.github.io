WEBVTT
Kind: captions
Language: ar

00:00:00.400 --> 00:00:04.834
‫آمل أنك تفهم أفضل الآن لم
‫OnClickListener واجهة وسيطة

00:00:05.200 --> 00:00:07.367
‫مع وظيفة تجريدية اسمها
‫onClick

00:00:07.800 --> 00:00:11.100
‫دورك كمطور أن تضبط مستمعي الأحداث

00:00:11.333 --> 00:00:13.933
‫لأحداث الإدخال التي تريد
‫معالجتها في تطبيقك

00:00:14.200 --> 00:00:18.633
‫وللتحديد أكثر، ولكل مستمع،
‫ستحتاج لاتباع خطوات ثلاث

00:00:19.033 --> 00:00:22.566
‫الأولى، عرف مستمع الحدث
‫والسلوك المخصص..

00:00:22.700 --> 00:00:24.100
‫لما بعد وقوع الحدث

00:00:24.433 --> 00:00:27.000
‫الثانية، أنشئ نسخة كائن جديدة

00:00:27.233 --> 00:00:29.500
‫من مستمع الحدث باستدعاء
‫الدالة الإنشائية

00:00:29.567 --> 00:00:33.700
‫والثالثة، ربط المستمع بالواجهة
‫التي تريد الاستماع للأحداث عليها

00:00:33.800 --> 00:00:36.067
‫ثم سأريك الكود الذي تحتاج لكل خطوة

00:00:36.133 --> 00:00:39.766
‫نحتاج أولاً لتعريف فئة مستمع أحداث
‫تطبق واجهة وسيطة

00:00:39.967 --> 00:00:44.434
‫يمكنك تسميتها ما تريد طالما تتبع
‫أعراف جافا في تسمية الفئات

00:00:44.800 --> 00:00:47.933
‫في هذه الحالة أسميناها
‫NumbersClickListener

00:00:48.100 --> 00:00:52.467
‫وكودها موجود في ملف جديد اسمه
‫NumbersClickListener.java

00:00:52.533 --> 00:00:54.766
‫عندما نعرف فئة
‫NumbersClickListener

00:00:54.867 --> 00:01:00.100
‫سيذكر إعلانها "فئة عامة" متبوعة
‫باسم الفئة، متبوعة بكلمة implements

00:01:00.167 --> 00:01:03.567
‫ثم اسم الواجهة وهو في هذه الحالة
‫OnClickListener

00:01:03.867 --> 00:01:07.167
‫لاحظ أن كلمة (تطبق implements) هي
‫كلمة جافا دلالية ذات مغزى خاص

00:01:07.233 --> 00:01:11.933
‫ويمكنك أن تجد قائمة الكلمات الخاصة
‫في توثيقات (أوراكل) عن جافا

00:01:12.033 --> 00:01:15.367
‫نستخدم (تطبق) للتعبير عن أن فئة
‫NumbersClickListener..

00:01:15.467 --> 00:01:20.267
‫ستدعم الواجهة الوسيطة المحددة
‫وتضع كوداً لكافة وظائفها التجريدية

00:01:20.433 --> 00:01:22.866
‫بتطبيق واجهة OnClickListener..

00:01:22.967 --> 00:01:27.334
‫وفي كل جزء من كود آندرويد يتوقع
‫نوع كائن OnClickListener..

00:01:27.467 --> 00:01:29.467
‫يمكننا استخدام
‫NumbersClickListener

00:01:29.533 --> 00:01:33.600
‫ومباشرة قبل الوظيفة، لدينا تعبير
‫Override@

00:01:33.767 --> 00:01:39.067
‫وهو ما يعني أننا نتجاوز الوظيفة الخالية
‫في الواجهة، ونضع تطبيقنا الخاص لها

00:01:39.233 --> 00:01:41.100
‫تطبيقنا لوظيفة onClick..

00:01:41.200 --> 00:01:45.200
‫أننا نريد رسالة منبثقة تذكر
‫"افتح قائمة الأرقام"

00:01:45.367 --> 00:01:48.767
‫كان بإمكاننا أي سلوك مخصص هنا،
‫ولكن هذا مجرد مثال

00:01:48.967 --> 00:01:51.400
‫ما أن نعرف فئة
‫NumbersClickListener..

00:01:51.467 --> 00:01:53.467
‫سنحتاج لإنشاء نسخة كائن منه

00:01:53.600 --> 00:01:56.800
‫إن تذكرت من الدورة الماضية،
‫لدينا قالب الفئة..

00:01:56.933 --> 00:02:00.766
‫ونريد إنشاء نسخ كائنات منها،
‫ولم ننشئ إلا مسقطاً أفقياً

00:02:00.900 --> 00:02:02.833
‫لكننا نحتاج لمنزل حقيقي

00:02:02.933 --> 00:02:06.166
‫أتذكر التركيب اللغوي لإنشاء كائن
‫باستخدام الدالة الإنشائية..

00:02:06.233 --> 00:02:09.166
‫لإنشاء نسخة كائن
‫NumbersClickListener

00:02:09.233 --> 00:02:12.566
‫يمكننا استدعاء الدالة الإنشائية على
‫الفئة واستخدام كلمة new

00:02:12.600 --> 00:02:17.133
‫وهذا سينشئ كائناً جديداً يمكننا تخزينه
‫في المتغير على الجانب الأيسر

00:02:17.233 --> 00:02:19.100
‫بنوع البيانات هذا

00:02:19.200 --> 00:02:22.833
‫في تطبيق Miwok، هكذا بدا الكود
‫في ملف MainActivity

00:02:23.067 --> 00:02:24.600
‫وعدلنا النشاط الرئيسي..

00:02:24.700 --> 00:02:29.100
‫لنتمكن من الاستماع لأحداث
‫النقر فور إنشاء النشاط

00:02:29.567 --> 00:02:32.100
‫ننشئ كائن جديد من
‫NumbersClickListener

00:02:32.700 --> 00:02:35.200
‫ونخزنه في متغير اسمه
‫ClickListener

00:02:35.433 --> 00:02:38.866
‫وهو متغير نوع بياناته
‫NumbersClickListener

00:02:38.933 --> 00:02:41.933
‫ما أن يصبح لدينا نسخة كائن من
‫NumbersClickListener

00:02:42.033 --> 00:02:45.466
‫نحتاج لربطه بالواجهة
‫التي سنستمع للنقرات عليها

00:02:45.700 --> 00:02:47.033
‫وهذا هو الكود اللازم

00:02:47.100 --> 00:02:50.333
‫بفرض أن الواجهة مخزنة في
‫متغير اسمه buttonView

00:02:50.467 --> 00:02:53.100
‫فنحتاج فقط لاستدعاء
‫setOnClickListener

00:02:53.200 --> 00:02:57.667
‫على تلك الواجهة، ونمرر باراميتر
‫وسيط واحد هو متغير ClickListener

00:02:58.233 --> 00:03:01.533
‫كيف نعرف استدعاء هذه الوظيفة
‫بوسيط المدخل هذا تحديداً؟

00:03:01.600 --> 00:03:03.733
‫نعود إلى توثيقاتنا المفيدة

00:03:03.833 --> 00:03:05.966
‫سننظر هنا إلى فئة View

00:03:06.067 --> 00:03:09.400
‫وبها وظيفة تسمى
‫setOnClickListener

00:03:09.467 --> 00:03:11.434
‫حيث تمرر
‫OnClickListener

00:03:11.467 --> 00:03:14.167
‫حيث يطبق NumbersClickListener
‫هذه الواجهة..

00:03:14.233 --> 00:03:16.833
‫فهو يعتبر أيضاً نوع بيانات
‫OnClickListener

00:03:16.900 --> 00:03:19.433
‫ويمكننا تمرير هذا كمدخل إلى الوظيفة

00:03:20.133 --> 00:03:23.033
‫لننظر الآن كيف سيبدو الكود في التطبيق

00:03:23.500 --> 00:03:26.133
‫رغم هذا، لا تحتاج لإجراء
‫هذه التغييرات الآن

00:03:26.667 --> 00:03:30.734
‫إذ سيوفر الاختبار في الفيديو
‫التالي تعليمات مفصلة

00:03:31.133 --> 00:03:33.833
‫لذا تابعنا وحاول استيعاب المنطق

00:03:34.367 --> 00:03:38.834
‫أنشأت هنا فئة NumbersClickListener
‫وعرفتها في ملف جافا الخاص بها

00:03:39.400 --> 00:03:41.667
‫تذكر أننا نعرف اسم الحزمة

00:03:42.200 --> 00:03:46.100
‫ليتم تجميع الكود تحت
‫اسم فريد لحزمة واحدة

00:03:46.333 --> 00:03:50.166
‫ثم جمل الاستيراد لأننا نستخدم
‫فئات View وToast

00:03:50.300 --> 00:03:53.733
‫ويمكننا استخدامهم رغم أننا لم نكتبهم
‫لأننا استوردناهم

00:03:53.833 --> 00:03:55.767
‫ثم في إعلان الفئة..

00:03:56.000 --> 00:03:59.433
‫لدينا
‫implements View.OnClickListener

00:03:59.567 --> 00:04:03.268
‫وأريد أن أشير إلى إضافتنا
View.OnClickListener

00:04:03.334 --> 00:04:06.835
‫لنكون واضحين في إشارتنا إلى
‫OnClickListener..

00:04:07.000 --> 00:04:09.967
‫وهي جزء من ملف view.java
‫في هذه الحزمة

00:04:10.033 --> 00:04:14.267
‫وتذكر أننا نستخدم معامل (النقطة)
‫للوصول إلى أعضاء فئة جافا

00:04:14.333 --> 00:04:17.867
‫لذا هنا في NumbersClickListener
‫أنشأت وظيفة onClick

00:04:18.100 --> 00:04:21.267
‫وفيها قلت أنه عند نقر فئة الأرقام..

00:04:21.333 --> 00:04:25.533
‫نختار أن تعرض رسالة منبثقة تقول
‫"افتح قائمة الأرقام"

00:04:25.967 --> 00:04:28.634
‫وهاك.. ها هو
‫NumbersClickListener

00:04:28.733 --> 00:04:30.733
‫سأنتقل الآن إلى النشاط الرئيسي

00:04:30.933 --> 00:04:35.133
‫في نهاية وظيفة onCreate
‫نحتاج لإنشاء كائن ClickListener جديد

00:04:35.367 --> 00:04:38.300
‫نريد الآن ربط ClickListener
‫بواجهة فئة الأرقام

00:04:38.333 --> 00:04:41.866
‫لكن يتعين أن نجد كائن الواجهة
‫في هيكلة الواجهات

00:04:42.000 --> 00:04:46.100
‫وهذه العملية ستبدو مألوفة لك من
‫تطبيق JustJava في الدورة السابقة

00:04:46.233 --> 00:04:48.133
‫لذا هاك كيف سنكتب الكود

00:04:48.533 --> 00:04:53.033
‫لنجد الواجهة التي تعرض فئة الأرقام..

00:04:53.933 --> 00:04:56.500
‫هنا أستدعي وظيفة
‫findViewById

00:04:56.800 --> 00:04:59.367
‫وأطلب الواجهة ذات المعرف numbers

00:04:59.800 --> 00:05:03.633
‫ما أن نجد الواجهة،
‫سأخزنها في متغير اسمه numbers

00:05:03.800 --> 00:05:06.333
‫ثم يمكننا استدعاء وظيفة
‫setOnClickListener

00:05:06.400 --> 00:05:10.200
‫على واجهة النص هذه،
‫وتمرير كائن ClickListener مدخلاً لها

00:05:10.333 --> 00:05:11.566
‫وهكذا سيبدو

00:05:12.100 --> 00:05:15.434
‫لذا هنا نضبط setOnClickListener
‫على واجهة النص

00:05:15.833 --> 00:05:18.166
‫ونمرر كائن ClickListener مدخلاً لها

00:05:18.233 --> 00:05:21.733
‫لذا ستخزن واجهة النص numbers
‫في حالتنا هذه كائن ClickListener

00:05:21.833 --> 00:05:25.566
‫ولاحقاً، إذا ضُغطت هذه الواجهة
‫سيبدأ مستمع النقرات عمله

00:05:25.767 --> 00:05:28.300
‫لاختبار ما إذا كان كود جافا
‫الذي كتبت يعمل حقاً..

00:05:28.400 --> 00:05:31.167
‫يجب أن أمسح الكود القديم
‫الذي كتبته لنقر الزر

00:05:31.567 --> 00:05:34.700
‫لذا في ملف
‫activity_main.xml

00:05:35.167 --> 00:05:37.867
‫سأحتاج لحذف سمة
‫android:onClick

00:05:38.133 --> 00:05:39.566
‫على واجهة نص الأرقام

00:05:39.867 --> 00:05:44.400
‫وفي MainActivity.java
‫سأحتاج لحذف وظيفة openNumbersList

00:05:44.867 --> 00:05:48.534
‫وهذا يترك النشاط الرئيسي بوظيفة واحدة
‫ألا وهي onCreate

00:05:48.967 --> 00:05:52.034
‫الآن وعندما أشغل التطبيق
‫على جهازي، وأنقر فئة الأرقام

00:05:52.133 --> 00:05:53.333
‫تُعرض رسالة منبثقة

00:05:53.667 --> 00:05:56.000
‫عظيم، الآن كود ClickListener
‫يعمل

