WEBVTT
Kind: captions
Language: zh-CN

00:00:00.270 --> 00:00:03.630
在上一节视频中 我们已经了解了前两步

00:00:03.630 --> 00:00:06.670
现在我会给你展示一些你能够实践的事情

00:00:06.670 --> 00:00:10.040
我将要改变 quantity 的初始值

00:00:10.040 --> 00:00:13.690
以便当应用启动时 它的值是0 不是2

00:00:13.690 --> 00:00:17.030
实现它的方式是修改全局变量 quantity

00:00:17.030 --> 00:00:19.400
初始化为 0

00:00:19.400 --> 00:00:22.930
increment 和 decrement 方法会正常工作

00:00:22.930 --> 00:00:24.390
当调用 increment 方法时

00:00:24.390 --> 00:00:26.570
它会使用最新的 quantity 值 然后加1

00:00:26.570 --> 00:00:31.140
当调用 decrement 方法时 将 quantity 的值减1

00:00:31.140 --> 00:00:33.250
我们试一下

00:00:33.250 --> 00:00:34.040
这看起来很奇怪

00:00:34.040 --> 00:00:35.490
我想让它显示 0

00:00:35.490 --> 00:00:39.700
如果我点击 + 按钮 奇怪的是 它变成了 1

00:00:39.700 --> 00:00:43.850
看起来减小了 但是它实际上增加了

00:00:43.850 --> 00:00:46.110
看起来这些按钮正常工作 但是

00:00:46.110 --> 00:00:49.120
初始化的时候出现了问题

00:00:49.120 --> 00:00:52.350
我们忘记修改 activity_main.xml 布局文件

00:00:52.350 --> 00:00:55.050
在这个布局文件里 我们有一个 TextView

00:00:55.050 --> 00:00:56.860
初始的 quantity 值是2

00:00:56.860 --> 00:01:01.290
当应用启动的时候就能修复显示2的问题

00:01:01.290 --> 00:01:02.570
现在它显示的

00:01:02.570 --> 00:01:04.660
初始值为0

00:01:04.660 --> 00:01:07.310
然后如果我点击 + 按钮 值的更新是正常的

00:01:07.310 --> 00:01:09.340
然后如果我点击 - 按钮 值的更新是正常的

00:01:10.500 --> 00:01:13.630
你能看到有一点棘手的是

00:01:13.630 --> 00:01:15.900
我们在两个地方对 quantity 进行初始化

00:01:15.900 --> 00:01:19.660
在代码中有两个地方做相同的事情

00:01:19.660 --> 00:01:24.080
可能会出现 bug 就像我们看到的

00:01:24.080 --> 00:01:28.150
解决这个问题的方法是 当应用启动时

00:01:28.150 --> 00:01:31.990
在 MainActivity 里立即显示 quantity 的值为 0

00:01:31.990 --> 00:01:35.040
而不是依赖布局中的初始化

00:01:35.040 --> 00:01:37.890
这种方式会使全局变量成为这个值的唯一来源

00:01:37.890 --> 00:01:39.260
但是你现在不用担心

00:01:39.260 --> 00:01:43.280
你会在课程三中会学到更好的解决办法

00:01:43.280 --> 00:01:47.060
另一个我们可以实践的事情是 每次点击 + 按钮时

00:01:47.060 --> 00:01:49.510
咖啡的数量加倍

00:01:49.510 --> 00:01:53.450
每次点击 – 按钮时 咖啡的数量减半

00:01:53.450 --> 00:01:55.360
我们将 quantity 的初始值设置为2

00:01:55.360 --> 00:01:59.110
以便如果我们点击 – 按钮 我们至少能使咖啡的数量减半

00:02:00.140 --> 00:02:01.730
当调用 increment 方法时

00:02:01.730 --> 00:02:04.110
我们想使咖啡的数目加倍

00:02:04.110 --> 00:02:07.900
我们应该使用当前的 quantity 然后乘以2

00:02:07.900 --> 00:02:10.288
然后得到新的 quantity 值并且

00:02:10.288 --> 00:02:12.550
在屏幕上显示

00:02:12.550 --> 00:02:14.900
另一方面 我们调用 decrement 方法

00:02:14.900 --> 00:02:19.090
对于 decrement 方法 我们想要咖啡的数目减少一半

00:02:19.090 --> 00:02:21.720
所以我们可以获取当前值 然后除以2

00:02:22.960 --> 00:02:24.470
就会得到新的 quantity 值

00:02:24.470 --> 00:02:26.360
并将它显示在屏幕上

00:02:26.360 --> 00:02:26.910
我们试一下

00:02:28.060 --> 00:02:30.660
你可以看到 每次你想要更改 quantity 的

00:02:30.660 --> 00:02:32.000
初始值时 这里都会产生错误

00:02:32.000 --> 00:02:34.250
你需要在两个地方改变它的值

00:02:34.250 --> 00:02:35.105
现在我们运行这个应用

00:02:35.105 --> 00:02:36.460
好

00:02:36.460 --> 00:02:38.650
它已经启动 quantity 的初始值是2

00:02:38.650 --> 00:02:41.660
如果我点击 + 按钮 quantity 的值每次都会加倍

00:02:41.660 --> 00:02:43.070
确实是这样

00:02:43.070 --> 00:02:44.350
如果我点击 – 按钮

00:02:44.350 --> 00:02:46.820
每次它会将咖啡的数目减少一半

00:02:46.820 --> 00:02:49.530
它做到了

00:02:49.530 --> 00:02:54.260
如果我以调试模式运行 你会看到每次变量的值是怎样改变的

00:02:54.260 --> 00:02:57.358
quantity 的初始值是2 然后它变成了4

00:02:57.358 --> 00:03:01.830
然后 quantity 的初始值是4

00:03:01.830 --> 00:03:05.050
它会变成8 以此类推

00:03:06.870 --> 00:03:09.960
我确信你能想到更多创造性的方法来解决

00:03:09.960 --> 00:03:11.300
quantity 更新的问题

00:03:11.300 --> 00:03:15.420
希望这个能帮助你更好地理解全局变量

00:03:15.420 --> 00:03:19.020
但是如果我点击 ORDER 按钮 它没有显示

00:03:19.020 --> 00:03:21.200
订购的咖啡数目的总价

00:03:21.200 --> 00:03:22.430
在下一节视频中我们会解决这个问题

