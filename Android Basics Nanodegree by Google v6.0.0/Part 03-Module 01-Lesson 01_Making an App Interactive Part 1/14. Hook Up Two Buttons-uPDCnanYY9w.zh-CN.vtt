WEBVTT
Kind: captions
Language: zh-CN

00:00:01.280 --> 00:00:04.640
第一步是修改 activity_main 中 XML 的布局

00:00:04.640 --> 00:00:07.300
然后应用的效果就是这样

00:00:07.300 --> 00:00:10.099
让我们进入 Android Studio  看一下那个文件

00:00:10.099 --> 00:00:12.802
这就是 activity_main.XML 布局文件

00:00:12.802 --> 00:00:16.540
右手边是设备的预览

00:00:16.540 --> 00:00:20.390
我可以点击放大镜使设备变大

00:00:20.390 --> 00:00:21.270
现在好多了

00:00:22.350 --> 00:00:25.550
为了构建预想的布局 我先添加一个加按钮

00:00:25.550 --> 00:00:28.650
在 QUANTITY 的报头和 QUANTITY 的值之间

00:00:28.650 --> 00:00:32.790
在布局底部我们已经有了一个 ORDER 按钮

00:00:32.790 --> 00:00:36.330
所以我们可以复制这部分代码 粘贴到

00:00:36.330 --> 00:00:39.880
QUANTITY 的报头 QUANTITY 值之间

00:00:39.880 --> 00:00:42.450
按钮的位置已经正确了

00:00:42.450 --> 00:00:45.470
我需要改变文本 以表明是加而非订购

00:00:47.010 --> 00:00:48.660
我也要删除上面的空隙

00:00:48.660 --> 00:00:52.790
因为这个文本所在的区域的底部

00:00:52.790 --> 00:00:54.310
已经有 16dps 的空隙了

00:00:54.310 --> 00:00:56.300
所以删掉多余的空隙

00:00:56.300 --> 00:00:59.940
按钮太大了 在之前的测验中我们已经学过如何修改按钮的大小

00:00:59.940 --> 00:01:02.880
我们将按钮的高和宽改为 48dps

00:01:02.880 --> 00:01:04.660
我将编辑这个按钮的 XML 

00:01:06.010 --> 00:01:08.100
现在是正确的大小了

00:01:08.100 --> 00:01:12.030
我们复制 XML 中的这段代码 粘贴在下面的 quantity 值中

00:01:12.030 --> 00:01:13.980
我们就有了 - 按钮

00:01:13.980 --> 00:01:17.430
我要删除这块空白 因为根据 Android 代码编写风格

00:01:17.430 --> 00:01:20.690
你的代码中不应有额外的空白

00:01:20.690 --> 00:01:25.050
现在我要修改这个按钮的文本使它显示减号

00:01:26.070 --> 00:01:29.210
它的高度和宽度都是 14dsp

00:01:29.210 --> 00:01:31.010
现在加号、减号按钮的位置是正确的

00:01:32.320 --> 00:01:35.990
之前提到过 QUANTITY 初始值是 2

00:01:35.990 --> 00:01:38.280
初始价格是 10美元

00:01:38.280 --> 00:01:39.380
现在修改一下

00:01:40.410 --> 00:01:42.620
这是目前的布局效果

00:01:42.620 --> 00:01:46.170
让我们回顾一下任务图 检查一下步骤

00:01:46.170 --> 00:01:49.430
我们已经成功的改变了布局 但是我们还需要修改

00:01:49.430 --> 00:01:52.610
+ 按钮 点击它时调用 increment 方法

00:01:52.610 --> 00:01:55.720
点击-按钮时 调用 decrement 方法

00:01:56.830 --> 00:02:00.530
回到 Android Studio中修改+按钮

00:02:00.530 --> 00:02:04.390
使 android:onClick 属性值为 increment

00:02:04.390 --> 00:02:07.060
这样当点击 + 按钮时 会调用

00:02:07.060 --> 00:02:09.430
MainActivity 中的 increment 方法

00:02:09.430 --> 00:02:12.883
类似的还有 - 按钮 我要修改 onClick 属性值

00:02:12.883 --> 00:02:14.376
使其为 decrement

00:02:16.477 --> 00:02:19.350
保存 然后在设备上运行

00:02:20.780 --> 00:02:25.420
布局不错 但当我点击 + 按钮时 它崩溃了

00:02:25.420 --> 00:02:27.560
你还记得我之前演示过如何从错误堆栈中

00:02:27.560 --> 00:02:29.310
查看日志吗？

00:02:29.310 --> 00:02:32.560
日志已经默认打开 向上拖动箭头

00:02:32.560 --> 00:02:35.320
可以看到更多信息

00:02:35.320 --> 00:02:38.020
向上滚动就会看到我们的错误

00:02:39.300 --> 00:02:42.550
这是我们应用的 Java 部分 说明了 IllegalStateException

00:02:43.790 --> 00:02:47.040
向右滚动 可以看到更多错误信息

00:02:47.040 --> 00:02:50.750
错误信息表示 MainActivity 中无法找到 

00:02:50.750 --> 00:02:52.150
increment 方法

00:02:52.150 --> 00:02:55.940
这和之前视频中的错误很类似

00:02:55.940 --> 00:02:58.850
主要是 Main_Activity 中没有 increment 方法

00:02:58.850 --> 00:03:01.765
可能是 因为我们还没有修改

00:03:02.820 --> 00:03:03.760
第二步

00:03:03.760 --> 00:03:07.150
在 Main_Activity 中添加 increment 方法

00:03:07.150 --> 00:03:12.230
创建 quantity 变量 初始值是3 并显示出来

00:03:12.230 --> 00:03:15.100
为此 我打开了 MainActivity.java 文件

00:03:15.100 --> 00:03:18.160
将加号按钮和加法关联起来 

00:03:18.160 --> 00:03:20.900
和订单按钮关联订购行为是非常类似的

00:03:20.900 --> 00:03:23.490
所以我复制这部分控制订购的代码

00:03:25.030 --> 00:03:28.406
却出现错误了 在 MainActivity 中已经

00:03:28.406 --> 00:03:29.600
有 submitOrder 方法了

00:03:29.600 --> 00:03:32.980
MainActivity 中不能存在两个同名的方法

00:03:32.980 --> 00:03:34.350
不过没关系

00:03:34.350 --> 00:03:36.779
因为我打算修改它为 increment 方法

00:03:37.860 --> 00:03:38.790
现在没有错误了

00:03:39.820 --> 00:03:42.912
我要修改上面的注释 因为这是一个新方法

00:03:42.912 --> 00:03:45.610
更新注释来指明这是加号按钮

00:03:45.610 --> 00:03:47.590
而不是订单按钮

00:03:47.590 --> 00:03:51.192
在 increment 方法中 我要创建一个整型变量 quantity

00:03:51.192 --> 00:03:56.180
按照之前要求的 初始值设为3

00:03:56.180 --> 00:03:59.030
然后我就可以在屏幕中显示它的值

00:03:59.030 --> 00:04:00.820
在这个方法中不需要更新价格

00:04:00.820 --> 00:04:03.110
我可以删掉这一行代码

00:04:03.110 --> 00:04:04.690
看起来不错 测试一下看看

00:04:06.030 --> 00:04:10.020
现在我点击 + 按钮 它的确更新为3

00:04:10.020 --> 00:04:11.670
非常好

00:04:11.670 --> 00:04:14.240
但我点击 - 按钮时 它又崩溃了

00:04:15.740 --> 00:04:19.072
让我们检查一下日志 滚动到底部

00:04:19.072 --> 00:04:22.010
看到最新的日志 向上滚动查看上一个错误

00:04:23.070 --> 00:04:23.690
对于我们的应用

00:04:23.690 --> 00:04:26.330
有一个 IllegalStateException 错误 因为在

00:04:26.330 --> 00:04:28.610
activity 中没有找到 decrement 方法

00:04:28.610 --> 00:04:32.580
这个是可以预料的 因为我们还没有添加 decrement 方法

00:04:32.580 --> 00:04:33.600
现在我们填加上

00:04:35.052 --> 00:04:37.790
复制这个方法 然后粘贴到底部

00:04:38.980 --> 00:04:40.610
重命名为 decrement

00:04:42.110 --> 00:04:43.980
现在需要更新一下注释

00:04:43.980 --> 00:04:46.730
当点击减号按钮时 方法就被引用了

00:04:48.180 --> 00:04:50.190
为了弄明白这个方法的作用

00:04:50.190 --> 00:04:52.100
回顾一下任务

00:04:52.100 --> 00:04:54.190
目前我们完成了两步

00:04:54.190 --> 00:04:57.215
最后一步是 Main_Activity 中的 decrement 方法

00:04:57.215 --> 00:04:59.705
我们想要创建一个 quantity 变量 初始值为1

00:05:00.920 --> 00:05:02.840
并在屏幕上显示quantity

00:05:04.140 --> 00:05:06.990
在 decrement 方法中我们创建了一个整型变量

00:05:06.990 --> 00:05:09.160
现在我打算设置它的初始值为1

00:05:09.160 --> 00:05:11.340
然后屏幕上显示 quantity

00:05:12.870 --> 00:05:13.940
在设备上运行一下

00:05:15.570 --> 00:05:18.790
这次交叉点击它也不会崩溃了

00:05:18.790 --> 00:05:22.350
如果我点击 - 按钮 它就减小到1 了

00:05:22.350 --> 00:05:25.250
如果我点击 + 按钮 它增加到3了

00:05:25.250 --> 00:05:27.970
按钮工作和期望的一样

00:05:27.970 --> 00:05:29.670
至少在这个阶段是这样的

00:05:29.670 --> 00:05:34.063
理想的状态是 正如之前提到的 它可以增加到 4、5、6

00:05:34.063 --> 00:05:36.620
或者减小到 2、1、0

00:05:36.620 --> 00:05:39.510
这将在课程后续阶段实现

00:05:39.510 --> 00:05:40.250
目前来看 做的不错

