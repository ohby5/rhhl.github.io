WEBVTT
Kind: captions
Language: zh-CN

00:00:00.170 --> 00:00:05.910
在 makeHttpRequest 方法中 如果 URL 不是 null

00:00:05.910 --> 00:00:10.490
且与无效 URL 进行连接没有任何意义 我们仅应执行 HttpRequest

00:00:10.490 --> 00:00:14.020
因此在方法的开始处 让我们检查 URL 是否为 null

00:00:14.020 --> 00:00:18.349
如果 URL 为 null 则我们将通过返回 仅仅包含空字符串的 jsonResponse

00:00:18.349 --> 00:00:19.865
及早退出该方法

00:00:19.865 --> 00:00:22.492
那么现在让我们移至 此练习中的核心任务

00:00:22.492 --> 00:00:25.280
以检查响应代码

00:00:25.280 --> 00:00:27.290
在连接 已建立之后

00:00:27.290 --> 00:00:31.960
你想要通过调用 urlConnection.getResponseCode() 检查响应代码

00:00:31.960 --> 00:00:34.900
如果你检查该文档 你将知道其返回一个整数

00:00:34.900 --> 00:00:37.542
因此在此测试条件下 对于 if 语句

00:00:37.542 --> 00:00:39.796
我们检查响应代码是否 = 200

00:00:39.796 --> 00:00:43.206
如果是这样的话 我们随后会继续从 inputStream 进行读取

00:00:43.206 --> 00:00:45.100
并提取 jsonResponse

00:00:45.100 --> 00:00:47.380
否则 如果我们具有 错误的响应代码

00:00:47.380 --> 00:00:49.170
在其他字词 (而非 200) 中 我们将不会进行任何操作

00:00:49.170 --> 00:00:53.480
并且我们将从这下去并 返回 jsonResponse 其

00:00:53.480 --> 00:00:58.210
之前便已针对空字符串进行了初始化 从而将我们带至要点

00:00:58.210 --> 00:01:02.320
如果 makeHttpRequest 的返回值可以是空字符串

00:01:02.320 --> 00:01:05.730
则我们将需要确保 将 jsonResponse 视为输入的

00:01:05.730 --> 00:01:08.900
能够处理字符串为空的情况

00:01:08.900 --> 00:01:11.880
那么让我们一看 extractFeatureFromJson 方法

00:01:11.880 --> 00:01:15.120
在我们以从 jsonResponse 提取 信息为开端之前

00:01:15.120 --> 00:01:18.470
我们应查看信息参数 是空字符串还是

00:01:18.470 --> 00:01:22.880
null 方法为 在字符串中调用 TextUtils.isEmpty 并进行传递

00:01:22.880 --> 00:01:24.083
因此 我将继续进行操作并

00:01:24.083 --> 00:01:27.651
仅仅跳至此 isEmpty 函数的声明 以查看其行为

00:01:27.651 --> 00:01:31.180
我将通过执行 Cmd+单击 的快捷方式来进行此操作

00:01:31.180 --> 00:01:35.846
事实上 你此时会注意到 TextUtils 类中的 isEmpty 方法

00:01:35.846 --> 00:01:39.973
正在查看是否存在空字符串 或者字符串是否为 null

00:01:39.973 --> 00:01:41.308
那么 回到我们的代码

00:01:41.308 --> 00:01:44.304
现在如果此字符串为空 则此表达式将为 true 并且

00:01:44.304 --> 00:01:46.700
我们将从该方法提早返回

00:01:46.700 --> 00:01:49.950
现在我们已返回 null 因为没有来自 jsonResponse 的

00:01:49.950 --> 00:01:51.300
无效 Event 对象

00:01:51.300 --> 00:01:55.710
请注意来自 JSON 方法的这一提取特征 如何返回一个事件数据类型

00:01:55.710 --> 00:01:59.319
稍后 我们将在下一课中解释 Tsunami AsyuncTask 的

00:01:59.319 --> 00:02:00.200
完整执行路径

00:02:00.200 --> 00:02:03.540
但是如果有 null earthquake 则我们将不会更新 UI

00:02:03.540 --> 00:02:05.290
关键是只要 null 案例被妥善处理

00:02:05.290 --> 00:02:08.880
便可针对一个方法 返回 null

00:02:08.880 --> 00:02:11.140
现在 你知道如何检查 HTP 状态代码并

00:02:11.140 --> 00:02:14.680
根据你所接收的是成功的 还是不成功的响应代码

00:02:14.680 --> 00:02:16.030
来调整应用的行为

