WEBVTT
Kind: captions
Language: ar

00:00:00.334 --> 00:00:03.168
أحد المتطلبات المسبقى لإنشاء طلب شبكي..

00:00:03.294 --> 00:00:06.627
هو وجوب إنشاء اتصال شبكي لتطبيقك
ليرسل الطلب عبره

00:00:07.334 --> 00:00:09.972
افتراضياً، وعند إنشاء تطبيق آندرويد..

00:00:10.409 --> 00:00:12.276
فإنه لا يملك وصولاً للإنترنت

00:00:12.476 --> 00:00:16.137
دعني أريك ما أعنيه باستخدام تطبيق
(تسونامي) الذي أنشئناه لهذا الدرس

00:00:16.320 --> 00:00:20.625
يفترض بهذا التطبيق تنفيذ طلب HTTP
لجلب معلومات الزلازل

00:00:21.245 --> 00:00:22.712
إلا أن التطبيق ينهار

00:00:23.225 --> 00:00:26.124
إذا نظرنا إلى سجلات آندرويد،
فإنها تذكر أخطاء أمنية

00:00:26.418 --> 00:00:28.621
ويوضح الافتقار لصلاحية لاتصال بالإنترنت

00:00:28.677 --> 00:00:31.743
لم يطلب تطبيق (تسونامي)
إذناً بالوصول للإنترنت

00:00:31.854 --> 00:00:35.784
لذا يرفض نظام آندرويد محاولة
(تسونامي) بإجراء طلب HTTP

00:00:36.316 --> 00:00:38.284
والنتيجة انهيار التطبيق

00:00:38.377 --> 00:00:42.510
يحتاج تطبيقك لأن يطلب إذناً لينفذ
إجراءات محمية على جهاز المستخدم

00:00:42.790 --> 00:00:45.590
الإجراءات المحمية تشمل
إنشاء اتصال شبكي..

00:00:46.000 --> 00:00:47.400
أو الوصول للكاميرا

00:00:48.033 --> 00:00:49.534
أو إرسال رسائل قصيرة SMS

00:00:50.334 --> 00:00:51.534
أو الاتصال برقم هاتفي

00:00:52.106 --> 00:00:54.039
أو تسجيل الصوت من المايكروفون

00:00:54.167 --> 00:00:56.167
أو حتى تحديد موقع المستخدم

00:00:56.435 --> 00:00:59.935
كما توجد أذونات ليُخطر التطبيق
بتغييرات معينة في حالة الجهاز

00:01:00.304 --> 00:01:02.237
مثل تغير حالة الاتصال بالشبكة

00:01:02.742 --> 00:01:05.548
للقائمة الكاملة بالأذونات
التي يمكن لتطبيقك طلبها..

00:01:05.635 --> 00:01:07.312
راجع توثيقات آندرويد

00:01:07.543 --> 00:01:08.577
قد تتسائل..

00:01:08.720 --> 00:01:12.680
لم أحتاج إذناً إن أمكنني إرسال طلباً
ليلتقط تطبيق الكامير صورة لأجلي..

00:01:12.968 --> 00:01:15.368
أو لتطبيق الرسائل ليرسل رسالة..

00:01:15.467 --> 00:01:16.634
أو لطلب رقم هاتفي؟

00:01:16.896 --> 00:01:21.029
قوة هذه الطلبات تكمن في قدرتك على
إتخاذ إجراء لتنفيذ إجراء آخر نيابة عنك

00:01:21.327 --> 00:01:23.460
دون الحاجة لطلب الإذن لنفسك

00:01:23.988 --> 00:01:26.955
رغم ذلك، لو كنت تبني
تطبيق كاميرا خاص مثلاً..

00:01:27.062 --> 00:01:30.529
فستحتاج لطلب إذا الكامير لتتمكن
من الوصول مباشرة للعتاد

00:01:31.148 --> 00:01:32.949
لكل إذن تريد طلبه..

00:01:33.309 --> 00:01:37.676
ستحتاج إلى إضافة uses-permission
في ملف manifest في التطبيق

00:01:38.192 --> 00:01:40.164
مثلاً، إذا كنت تنشئ
تطبيق مراسلات..

00:01:40.244 --> 00:01:43.678
وتريد للمستخدم أن يستطيع
إرسال SMS مباشرة من تطبيقك..

00:01:43.976 --> 00:01:48.410
فستحتاج لإعلان حاجة التطبيق إلى
SEND_SMS في ملف manifest

00:01:48.661 --> 00:01:53.083
يجب أن يكون هنالك سطر لكل إذن
يحتاجه تطبيقك في ملف manifest

00:01:53.182 --> 00:01:55.761
أذونات التطبيق لها مستويات مختلفة

00:01:56.261 --> 00:01:58.300
المستويان الأهم لتعرفهما..

00:01:58.483 --> 00:02:00.657
هما (عادي).. و(خطير)

00:02:01.436 --> 00:02:04.067
الأذونات العادية تمثل تهديداً محدوداً
لخصوصية المستخدم

00:02:04.610 --> 00:02:06.343
أو لتشغيل التطبيقات الأخرى

00:02:06.546 --> 00:02:08.613
وسيمنح النظام الإذن بها آلياً

00:02:09.216 --> 00:02:14.100
المستوى الخطير يمنح وصولاً لمعلومات
المستخدم الشخصية والمحددة لهويته

00:02:14.497 --> 00:02:17.631
كما تغطي وظائف قد تؤثر في
كيفية عمل تطبيقات أخرى

00:02:18.074 --> 00:02:19.674
هذا يشمل استخدام الكامير

00:02:19.871 --> 00:02:23.772
الوصول لجهات الاتصال أو سجل المكالمات،
أو تسجيل الصوت من المايكروفون

00:02:24.152 --> 00:02:29.285
يجب طلب هذه الأذونات عند التشغيل، وأن
يمنحها المستخدم صراحة عبر رسائل النظام

00:02:29.655 --> 00:02:31.455
سيبدو مربع حوار النظام هكذا

00:02:31.827 --> 00:02:34.827
يطلب هذا التطبيق وصولاً
لجهات اتصال المستخدم

00:02:34.981 --> 00:02:38.419
ما أن يمنح المستخدم الإذن..
فلن يظهر مربع الحوار مجدداً

00:02:38.539 --> 00:02:43.406
إذا رفض المستخدم الإذن، فسيستمر التطبيق
بالعمل بشكل طبيعي ولكن دون تلك الخاصية

00:02:43.666 --> 00:02:48.494
لاحظ أن أسلوب طلب الإذن أثناء التشغيل
أتيح لأول مرة في (آندرويد 6.0 مارشميلو)

00:02:48.901 --> 00:02:51.802
كما ينطبق على أي جهاز أحدث من ذلك،
وعلى سبيل المثال..

00:02:52.000 --> 00:02:56.573
سيطلب من المستخدم منح الإذن
للوصول إلى الصور وملفات الوسائط..

00:02:56.836 --> 00:03:00.076
على الجهاز مباشرة عند محاولة
إرسال صورة من معرض الصور

00:03:00.243 --> 00:03:03.618
رغم هذا، وعلى الأجهزة العاملة
بآندرويد 5.1 أو أقدم..

00:03:03.729 --> 00:03:07.063
يطلب من المستخدم قبول كافة
الأذونات عند تثبيت التطبيق

00:03:07.534 --> 00:03:10.934
إذا كنت تستخدم جهاز آندرويد أقدم،
فلربما رأيت هذه الشاشة سابقاً

00:03:11.067 --> 00:03:13.035
الأسلوب القديم كان (الكل أو لا شيء)

00:03:13.152 --> 00:03:16.892
وكان على المستخدم قبول كافة الأذونات،
أو لا يتم تثبيت التطبيق

00:03:17.355 --> 00:03:21.533
مع أذونات وقت التشغيل، يمكن للمستخدم
انتقاء ما يمنحه من صلاحيات للتطبيق

00:03:22.067 --> 00:03:25.035
ويجب أن يكون المطور قادراً
على رد الفعل إذا أُلغي الإذن

00:03:25.734 --> 00:03:29.102
هنالك مقال مفيد حول أفضل الممارسات
فيما يتعلق بالأذونات

00:03:29.222 --> 00:03:32.589
عموماً، يفترض بك استخدام
أقل صلاحيات قدر الإمكان

00:03:32.923 --> 00:03:34.523
مع إرضاء احتياجات تطبيقك

00:03:34.696 --> 00:03:37.103
حاول استخدام التفويض كبديل

00:03:37.302 --> 00:03:41.764
وأضيف أن التطبيقات الطالبة لصلاحيات
كثيرة قد تبدو مشبوهة للمستخدمين

00:03:41.987 --> 00:03:44.387
ونتيجة لذلك، لن يتم تثبيتها كثيراً

00:03:44.479 --> 00:03:45.946
لذا لا تُغرق المستخدم

00:03:46.146 --> 00:03:49.483
لن نستخدم صلاحيات خطيرة في
هذه الدورة، لكن إن فعلت..

00:03:49.586 --> 00:03:52.853
اشرح باستيفاء لماذا تحتاج
هذه الصلاحيات للمستخدم

00:03:53.328 --> 00:03:55.828
في هذا الاختبار، أجب الأسئلة التالية

00:03:56.132 --> 00:03:59.714
هل تحتاج لإعلان صلاحيات لقراءة وكتابة
الأحداث في رزنامة المستخدم؟

00:04:00.005 --> 00:04:02.805
وماذا عن تشغيل الصوت
والفيديو على الجهاز؟

00:04:02.944 --> 00:04:05.944
أو ماذا عن تحديد موقع المستخدم الحالي؟

00:04:06.193 --> 00:04:09.243
وأخيراً، ماذا عن عرض
تنبيهات على الجهاز؟

00:04:09.759 --> 00:04:12.494
يمكنك مراجعة التوثيقات
في الروابط أدناه للمساعدة

