WEBVTT
Kind: captions
Language: zh-CN

00:00:00.370 --> 00:00:03.170
在应用中处理 Audio Focus 将是非常重要的

00:00:03.170 --> 00:00:04.750
代码更改

00:00:04.750 --> 00:00:08.010
在操作之前 我们先讲解下你在使用 AudioManager API 时

00:00:08.010 --> 00:00:10.570
需要作出的重大决策

00:00:11.680 --> 00:00:15.480
注意 API 是指 Android 框架向开发者提供的

00:00:15.480 --> 00:00:19.120
类和方法

00:00:19.120 --> 00:00:23.070
我们先从 AudioManager 请求 Audio Focus

00:00:23.070 --> 00:00:25.830
以便开始在应用上播放音频

00:00:25.830 --> 00:00:30.840
在上一道测试题中 我们发现我们需要调用 requestAudioFocus 方法

00:00:30.840 --> 00:00:36.049
该方法需要以下三个输入：一个 onAudioFocusChangeListener 对象

00:00:36.049 --> 00:00:38.410
streamType 和 a durationHint

00:00:39.690 --> 00:00:42.443
最后两个输入 streamType 和

00:00:42.443 --> 00:00:44.303
durationHint 是整型类型

00:00:44.303 --> 00:00:48.300
当我们调用 requestAudioFocus 方法时 我们应该传入什么

00:00:48.300 --> 00:00:51.550
作为 streamType 它是我们的第二个参数

00:00:51.550 --> 00:00:54.560
指的是我们要播放的音频的类型

00:00:54.560 --> 00:00:56.540
是歌曲还是铃声？

00:00:57.610 --> 00:01:01.130
第二个问题 我们应该传入什么作为 durationHint？

00:01:01.130 --> 00:01:02.550
即第三个参数

00:01:02.550 --> 00:01:05.780
指的是 Audio Focus 所需的时长

00:01:05.780 --> 00:01:09.350
是需要很短的时间还是很长时间？

00:01:09.350 --> 00:01:13.050
提示下 这两个答案都应该是整型

00:01:13.050 --> 00:01:16.990
更具体地说 应该是已经在 AudioManager 类中

00:01:16.990 --> 00:01:19.280
定义的整型常量

00:01:19.280 --> 00:01:23.110
在 AudioManager 类的参考文档中

00:01:23.110 --> 00:01:27.100
滚动到这个公开常量部分 然后再往下滚动一点点

00:01:27.100 --> 00:01:29.030
这些都是可以传入 requestAudioFocus 方法的

00:01:29.030 --> 00:01:31.280
可能 streamType

00:01:31.280 --> 00:01:34.686
可以引用为 AudioManager.STREAM

00:01:34.686 --> 00:01:38.650
AudioManager.STREAM.DTMF 等等

00:01:38.650 --> 00:01:42.730
左列给出了每个 streamType 的说明

00:01:44.070 --> 00:01:48.400
我们点开 STREAM_ALARM 变量了解下详情

00:01:48.400 --> 00:01:51.680
变量是指值永远不会变化的固定值

00:01:51.680 --> 00:01:55.090
按照惯例 变量名称全大写

00:01:55.090 --> 00:01:57.620
通常用来表示某种状态

00:01:57.620 --> 00:02:00.830
这里 STREAM_ALARM 的值为 4

00:02:00.830 --> 00:02:02.490
永远不会改变

00:02:02.490 --> 00:02:05.420
当我们向 AudioManager 传入这个常量值时

00:02:05.420 --> 00:02:07.690
它就会知道我们指的是这种特定的 streamType

00:02:07.690 --> 00:02:10.610
这些就是关于 streamType 的信息

00:02:10.610 --> 00:02:12.100
那么 durationHint 呢？

00:02:12.100 --> 00:02:15.110
我们转到 requestAudioFocus 方法

00:02:15.110 --> 00:02:17.295
注意 方法说明部分列出了

00:02:17.295 --> 00:02:20.140
durationHint 的不同有效选项

00:02:20.140 --> 00:02:22.764
例如 AUDIOFOCUS_GAIN_TRANSIENT 

00:02:22.764 --> 00:02:25.030
AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK

00:02:25.030 --> 00:02:28.370
以及其他几个选项 每个都提供了解释说明

00:02:28.370 --> 00:02:31.590
使你能够选择最合适的选项

00:02:31.590 --> 00:02:32.970
如果你在回答这两个问题时需要帮助

00:02:32.970 --> 00:02:35.850
请上网搜索下相关教程

00:02:35.850 --> 00:02:38.750
请将答案填在方框中 然后继续

