WEBVTT
Kind: captions
Language: zh-CN

00:00:00.190 --> 00:00:02.730
在我们针对 Miwok 应用完成的上一个编程任务中

00:00:02.730 --> 00:00:06.190
一旦不再需要 MediaPlayer 资源 我们就会释放了这些资源

00:00:06.190 --> 00:00:10.020
但是我们无法始终假设音频文件将播放完毕

00:00:10.020 --> 00:00:13.605
因为如果用户切换到了完全不同的 Activity 并中断了音频播放

00:00:13.605 --> 00:00:16.935
那么我们依然需要确保正确清空所有资源

00:00:16.935 --> 00:00:19.995
我的问题是 如果用户离开了该 Activity

00:00:19.995 --> 00:00:24.055
我们应该在 Activity 生命周期的哪个阶段

00:00:24.055 --> 00:00:25.785
释放 MediaPlayer 使用的资源？

00:00:25.785 --> 00:00:30.870
在 onResume onCreate OnStop 或 onDestroy 阶段？

00:00:32.000 --> 00:00:34.930
做出选择后 请修改你的应用

00:00:34.930 --> 00:00:39.110
以便在该生命周期阶段能够释放资源

00:00:39.110 --> 00:00:42.250
我来演示下在做出这一代码更改前后

00:00:42.250 --> 00:00:44.490
应用的外观行为会如何

00:00:44.490 --> 00:00:46.730
应用当前的行为是这样的

00:00:46.730 --> 00:00:50.027
点击某条短语 应用将开始读出短语发音

00:00:50.027 --> 00:00:52.703
如果我在播放完毕前就离开该 Activity

00:00:52.703 --> 00:00:55.649
应用将依然继续播放完整的音频文件

00:00:59.520 --> 00:01:02.680
&gt;&gt; 当我们根据 Activity 生命周期正确地

00:01:02.680 --> 00:01:05.500
清空媒体资源后 应用的代码版本将是这样的

00:01:05.500 --> 00:01:08.820
此时 当我们点按设备的主屏幕按钮

00:01:08.820 --> 00:01:11.820
应用应该立即停止播放音频文件

00:01:11.820 --> 00:01:13.290
即使正在播放短语的发音亦如此

00:01:13.290 --> 00:01:16.290
这就再次表明只有用户位于我们的应用中时

00:01:16.290 --> 00:01:18.180
我们才应该播放音频

00:01:18.180 --> 00:01:21.780
因为对我们来说 我们的应用并不是音乐或播客播放器应用

00:01:21.780 --> 00:01:24.054
我来演示下

00:01:24.054 --> 00:01:25.471
[SOUND]

00:01:25.471 --> 00:01:28.140
现在请做出这些代码更改吧

00:01:28.140 --> 00:01:30.650
请记得更新所有四个 Activity

