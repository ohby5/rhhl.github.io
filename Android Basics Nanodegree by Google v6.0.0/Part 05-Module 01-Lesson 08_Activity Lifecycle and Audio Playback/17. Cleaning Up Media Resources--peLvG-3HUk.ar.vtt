WEBVTT
Kind: captions
Language: ar

00:00:00.110 --> 00:00:03.000
هيا بنا نبدأ بإضافة قصاصة الكود التي قدمناها لك.

00:00:03.000 --> 00:00:04.155
وأضفها في التطبيق.

00:00:04.155 --> 00:00:08.220
سأنسخها هنا ثم التحوّل إلى آندرويد ستوديو

00:00:08.220 --> 00:00:10.050
ولصقها أسفل نشاط الأرقام.

00:00:10.050 --> 00:00:13.900
حسنًا، أريد الآن استدعاء هذه الوظيفة التي أضفناها
للتو

00:00:13.900 --> 00:00:18.140
إفلات مشغل الموسيقى عند انتهاء تشغيل الملف الصوتي.

00:00:18.140 --> 00:00:21.510
وهذا يعني أننا بحاجة إلى التسجيل في
onCompletionlistener

00:00:21.510 --> 00:00:23.080
مع مشغل الوسائط.

00:00:23.080 --> 00:00:27.070
ولذا تذكر أن هذا يحتاج إلى إعداد بعد بدء تشغيل مشغل
الوسائط.

00:00:27.070 --> 00:00:31.820
ولذا سأضيف الكود أدنى ذلك السطر
mMediaPlayer.start.

00:00:31.820 --> 00:00:34.470
وسأتر آندرويد ستوديو يكمل تلقائيًا

00:00:34.470 --> 00:00:36.930
إضافة رد الواجهة لي هنا.

00:00:36.930 --> 00:00:40.875
والآن مع وظيفة oncompletion يمكنني استدعاء

00:00:40.875 --> 00:00:42.220
وظيفة إفلات مشغل الوسائط.

00:00:42.220 --> 00:00:44.253
[BLANK_AUDIO]

00:00:44.253 --> 00:00:46.993
لذلك أدركت للتو أن هناك طريقة أكثر فعالية للقيام
بذلك.

00:00:46.993 --> 00:00:50.593
لذلك بدلًا من إنشاء oncompletionlistener جديد في كل
مرة ننقر فوق

00:00:50.593 --> 00:00:54.193
عنصر قائمة، يمكننا فقط إنشاء نسخة مفردة لهذه الوظيفة
oncompletionlistener

00:00:54.193 --> 00:00:56.870
ومن ثم إعادة استخدامها كل مرة.

00:00:56.870 --> 00:00:59.210
وللقيام بذلك بهذه الطريقة يكون أكثر كفاءة لأننا

00:00:59.210 --> 00:01:03.380
لن نقوم بإنشاء كائن جديد كل مرة وقد يأخذ ذلك موارد
جديدة.

00:01:03.380 --> 00:01:06.790
ولذا أريد نقل مجموعة الأكواد هنا حيث تطبيق واجهة
oncompletionlistener

00:01:06.790 --> 00:01:10.070
ووضعها في متغير عام.

00:01:10.070 --> 00:01:11.630
وهنا الشكل الذي تبدو عليه.

00:01:11.630 --> 00:01:14.530
ومن ثم سأنقل الكود الذي تم تطبيقه في واجهة

00:01:14.530 --> 00:01:15.430
oncompletionlistener.

00:01:17.760 --> 00:01:22.100
ونقله إلى متغير عام أسميته mCompletionListener.

00:01:22.100 --> 00:01:28.180
وبالعودة إلى هنا مرة أخرى، في كل مرة أنشئ فيها كائن
مشغل وسائط جديد

00:01:28.180 --> 00:01:32.570
وبدء تشغيل المشغل، يمكنني تعيين oncompletionlistener
ليكون متغير عام.

00:01:33.700 --> 00:01:36.062
وبالتالي سأمرره في mCompletionListener

00:01:36.062 --> 00:01:39.172
ولمزيد من التوضيح سأضيف بعض التعليقات.

00:01:39.172 --> 00:01:41.401
[BLANK_AUDIO]

00:01:41.401 --> 00:01:43.900
حسنًا، هيا نكمل المهمة الأولى.

00:01:43.900 --> 00:01:46.830
لقد قمنا بربط نشاط الأرقامن ولذا عند انتهائه

00:01:46.830 --> 00:01:50.630
يتم تشغيل الملف الصوتي، وسيقوم بإفلات موارد مشغل
الوسائط.

00:01:50.630 --> 00:01:54.640
والآن، المهمة الثانية هنا إفلات موارد مشغل الوسائط

00:01:54.640 --> 00:01:57.760
قبل تهيئة مشغل الوسائط لتشغيل ملف صوتي مختلف.

00:01:57.760 --> 00:01:59.630
وقد يحدث هذا، على سبيل المثال،

00:01:59.630 --> 00:02:02.150
عند نقر المستخدم فوق عدة عناصر قائمة في أي صف.

00:02:02.150 --> 00:02:06.070
ربما ليس لدى الجهاز الوقت الكافي لإنهاء تشغيل كل
ملف صوتي،

00:02:06.070 --> 00:02:08.380
ولذا ربما لا يتم تشغيل oncompletionlistener.

00:02:09.410 --> 00:02:11.516
ولذا إن كنا في وسط تشغيل ملف صوتي

00:02:11.516 --> 00:02:13.785
ونقر المستخدم فوق ملف صوتي مختلف تمامًا،

00:02:13.785 --> 00:02:16.593
إذًا نحن بحاجة إلى إيقاف وإفلات موارد مشغل الوسائط

00:02:16.593 --> 00:02:20.380
وعلى الفور إنشاء كائن مشغل وسائط جديد للمنطقة
الحالية.

00:02:20.380 --> 00:02:25.480
وبالعودة إلى نشاط الأرقام في وظيفة عنصر هنا

00:02:25.480 --> 00:02:29.280
قبل إنشاء مشغل الوسائط، علينا إفلات موارد مشغل
الوسائط أيضًا.

00:02:30.360 --> 00:02:32.890
نفعل ذلك فقط في حال تم تكوينه لتشغيل

00:02:32.890 --> 00:02:33.460
ملف صوتي مختلف.

00:02:34.890 --> 00:02:38.111
حسنًا كانت تلك كل التغييرات التي كنا بحاجة للقيام
بها لنشاط الأرقام

00:02:38.111 --> 00:02:41.199
والآن سأكرر الشيء ذاته مع جميع الأنشطة الأخرى.

00:02:41.199 --> 00:02:51.199
[BLANK_AUDIO]

00:02:54.081 --> 00:02:57.212
هذه كل التغييرات التي نحتاجها لتنفيذ جميع الأنشطة

00:02:57.212 --> 00:03:00.340
والآن سأختبر التطبيق للتأكد من عدم إتلاف شيء.

00:03:00.340 --> 00:03:04.490
وهنا التطبيق يعمل على جهازي وبطريقة التمثيل،

00:03:04.490 --> 00:03:05.810
يبدو أنه لم يتغير شيء.

00:03:05.810 --> 00:03:07.180
رائع.

00:03:07.180 --> 00:03:09.260
والآن دعونا نتحقق لمعرفة ما إذا كان الصوت لا يزال
يعمل.

00:03:09.260 --> 00:03:11.620
سأضغط على نشاط العبارات.

00:03:11.620 --> 00:03:14.410
سواء سأضغط لتشغيل ملف صوتي لأي كلمة

00:03:14.410 --> 00:03:19.060
وفقط سأسمح له حتى ينتهي أو سأضغط على عناصر القائمة
في تتابع سريع،

00:03:19.060 --> 00:03:21.130
كما يجب مسح موارد مشغل الوسائط.

00:03:22.170 --> 00:03:24.800
ولذا، سأجربها أولًا مع كلمة مفردة وأتركها حتى
تنتهي.

00:03:26.140 --> 00:03:30.260
&gt;&gt; والآن سأختبرها مع عدة عناصر قائمة

00:03:30.260 --> 00:03:32.945
في تتابع سريع ويجب التوقف.

00:03:32.945 --> 00:03:40.950
[SOUND]، حسنًا، هذا يبدو جيدًا.

