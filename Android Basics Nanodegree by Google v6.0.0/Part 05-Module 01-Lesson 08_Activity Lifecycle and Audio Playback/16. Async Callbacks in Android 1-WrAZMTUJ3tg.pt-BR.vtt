WEBVTT
Kind: captions
Language: pt-BR

00:00:00.000 --> 00:00:01.901
Lendo documentação
sobre MediaPlayer,

00:00:01.901 --> 00:00:03.334
você achará este método,

00:00:03.368 --> 00:00:05.401
setOnCompletionListener.

00:00:05.434 --> 00:00:09.068
A descrição diz que este método permite
que você registre uma callback.

00:00:09.101 --> 00:00:11.801
Elas serão chamadas
quando a fonte de mídia

00:00:11.834 --> 00:00:13.768
ou o áudio chegar ao fim.

00:00:13.801 --> 00:00:17.034
Veja que a entrada deste método
é um OnCompletionListener.

00:00:17.068 --> 00:00:19.068
Vamos clicar nele
para mais detalhes.

00:00:19.101 --> 00:00:22.834
MediaPlayer.OnCompletionListener
é uma interface.

00:00:22.868 --> 00:00:24.601
Ou seja,
você precisará implementá-la

00:00:24.601 --> 00:00:28.034
e dar o código
para seu método onCompletion().

00:00:28.034 --> 00:00:32.234
A resposta para a 1ª pergunta
é que o método onCompletion()

00:00:32.268 --> 00:00:34.834
do objeto onCompletionListener
será chamado

00:00:34.868 --> 00:00:38.101
quando o MediaPlayer terminar
de tocar o arquivo de mídia.

00:00:38.134 --> 00:00:41.634
Na 2ª etapa,
pedi que usasse essa informação

00:00:41.668 --> 00:00:43.868
para modificar o app
de exemplo

00:00:43.901 --> 00:00:45.201
de forma que,
quando a música terminasse,

00:00:45.234 --> 00:00:47.268
uma mensagem toast
aparecesse.

00:00:47.701 --> 00:00:50.768
Vamos voltar para nosso projeto
de reprodução no Android Studio.

00:00:50.801 --> 00:00:52.934
Depois que o MediaPlayer
começar,

00:00:52.968 --> 00:00:56.168
vou definir uma callback
para avisar quando a música terminar.

00:00:56.201 --> 00:01:00.168
De acordo com a dica que demos,
temos que definir o CompletionListener

00:01:00.201 --> 00:01:02.334
depois que o MediaPlayer
tiver iniciado.

00:01:02.368 --> 00:01:04.534
Depois que o mediaPlayer.start
for chamado,

00:01:04.534 --> 00:01:08.634
vamos chamar
o método setOnCompletionListener.

00:01:09.701 --> 00:01:14.468
Dentro dele, vou definir
uma classe listener anônima na linha,

00:01:14.501 --> 00:01:18.668
e lembre-se de que ela é anônima
porque não dei um nome de classe.

00:01:18.701 --> 00:01:20.401
Não há necessidade
de dar um nome de classe

00:01:20.402 --> 00:01:24.034
porque só usarei esta definição
uma vez.

00:01:26.668 --> 00:01:29.301
Dentro do método onCompletion,
vou modificá-lo

00:01:29.334 --> 00:01:32.668
para uma mensagem toast aparecer
dizendo: "Acabei!"

00:01:35.934 --> 00:01:38.601
Certo, vamos testá-lo.
Vou clicar no botão "play".

00:01:47.868 --> 00:01:50.368
Quando a música termina,
a mensagem toast aparece.

00:01:50.401 --> 00:01:51.468
Ótimo trabalho!

00:01:51.501 --> 00:01:55.468
Em suma, uso uma callback assíncrona
para eu ser notificada

00:01:55.501 --> 00:01:57.401
quando o MediaPlayer
terminar a música.

00:01:57.434 --> 00:02:00.268
Enquanto isso,
posso fazer outras coisas,

00:02:00.301 --> 00:02:02.404
como responder
a outros cliques do usuário

00:02:02.437 --> 00:02:04.767
enquanto espero ser chamada
de volta.

