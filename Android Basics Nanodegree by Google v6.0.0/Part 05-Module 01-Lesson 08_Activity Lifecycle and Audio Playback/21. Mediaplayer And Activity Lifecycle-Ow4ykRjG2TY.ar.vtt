WEBVTT
Kind: captions
Language: ar

00:00:00.240 --> 00:00:03.390
تذكر أنه عند إنشاء نشاط فإنه يتنقل خلال مراحل دورة
حياته

00:00:03.390 --> 00:00:08.050
من الإنشاء إلى بدء التشغيل ثم استئناف التشغيل.

00:00:08.050 --> 00:00:10.150
ومن ثم يتمكن المستخدم من التفاعل مع النشاط.

00:00:11.180 --> 00:00:14.870
عندما يخرج المستخدم من النشاط، ينتقل من حالة الإيقاف
المؤقت

00:00:14.870 --> 00:00:16.178
ثم حالة الإيقاف.

00:00:16.178 --> 00:00:19.370
إذا دمر النظام النشاط لأنه لم يعد هناك حاجة إليه،

00:00:19.370 --> 00:00:21.480
فهو ينتقل إلى حالة تم إتلافه.

00:00:21.480 --> 00:00:24.430
ولذا عند عدم القدرة على استدعاء وظيفة onDestroy,

00:00:24.430 --> 00:00:29.150
يمكننا فقط التأكد من أنه سيتم استدعاء الوظائف onPause
و onStop.

00:00:29.150 --> 00:00:31.080
ولذا هيا بنا نطلع على مستندات التوثيق

00:00:31.080 --> 00:00:34.550
لوظيفة الإفلات ضمن فئة مشغل الوسائط.

00:00:34.550 --> 00:00:39.010
ولذا نجد هنا أنه عند إيقاف النشاط مؤقتًا عبر وظيفة
onPause

00:00:39.010 --> 00:00:41.980
أو إيقافه عبر وظيفة onStop، وبعد ذلك يتم استدعاء
هذه الوظيفة

00:00:41.980 --> 00:00:45.670
لإفلات كائن مشغل الوسائط.

00:00:45.670 --> 00:00:48.700
وفي هذه الحالة، تُعد وظيفة دورة حياة النشاط مثالية
للعمل،

00:00:48.700 --> 00:00:51.260
سواء كانت وظيفة OnPause أو OnStop.

00:00:51.260 --> 00:00:53.700
لأنك فقط بحاجة إلى إفلاتها.

00:00:53.700 --> 00:00:57.320
ولذا سنختار إفلات الموارد في وظيفة OnStop.

00:00:57.320 --> 00:01:00.710
ولذا عند إخفاء النشاط تمامًا عن المستخدم، سنقوم
بتحرير موارد مشغل الوسائط،

00:01:00.710 --> 00:01:03.620
حتى إذا لم ينتهي النشاط من تشغيل الملف الصوتي
الحالي.

00:01:03.620 --> 00:01:06.270
حسنًا، هيا بنا نجري تغييرات الكود في التطبيق الآن.

00:01:06.270 --> 00:01:10.090
نجد هنا نشاط الأرقام، قبل وظيفة إفلات موارد مشغل
الوسائط.

00:01:10.090 --> 00:01:14.360
والآن سأتجاوز وظيفة OnStop لاستدعاء دورة حياة
النشاط.

00:01:14.360 --> 00:01:17.840
ولذا تذكر أننا أبدًا لن نكتب فوق وظيفة دورة حياة أي
نشاط كما هو موضح هنا

00:01:17.840 --> 00:01:20.850
وعلينا استدعاء إصدار الفئة الفائقة لهذه الوظيفة.

00:01:20.850 --> 00:01:24.820
لذلك استخدمت الفئة الفائقة هنا مع وظيفة OnStop لأن
النشاط يعرف

00:01:24.820 --> 00:01:28.030
كيفية التعامل مع نشاط التوقف وغير ذلك خلف المشاهد

00:01:28.030 --> 00:01:30.410
وأعمال التنظيف التي لا حاجة للمطورين القلق بشأنها.

00:01:30.410 --> 00:01:33.180
ولذلك إذا حاولت التعليق على سطر الكود هذا

00:01:33.180 --> 00:01:36.110
سترى أن التطبيق سيتعطل بشكل غير متوقع.

00:01:36.110 --> 00:01:36.680
لذا لا تفعل ذلك.

00:01:37.790 --> 00:01:40.470
والآن هنا بدلًا من مجرد استدعاء وظيفة الإفلات

00:01:40.470 --> 00:01:42.070
مباشرة في كائن مشغل الوسائط،

00:01:42.070 --> 00:01:46.910
سأقوم باستدعاء وظيفة مساعد الإفلات لمشغل الوسائط
المضاف في وقت سابق.

00:01:46.910 --> 00:01:49.540
ولذا السبب في استخدام وظيفة الإفلات لمشغل الوسائط

00:01:49.540 --> 00:01:50.730
بدلًا من مجرد وظيفة الإفلات،

00:01:50.730 --> 00:01:54.070
وذلك لأن هذه الوظيفة لها بعض المنطق الحقيقي عن إعداد
متغير مشغل الوسائط

00:01:54.070 --> 00:01:57.630
حيث العودة إلى الوضع فارغ إذا لم يتم تكوينه في الحال
لتشغيل ملف صوتي.

00:01:57.630 --> 00:02:01.370
وفي هذه الطريقة سنتعامل باستمرار مع إفلات موارد مشغل
الوسائط في النشاط

00:02:01.370 --> 00:02:05.150
سواء تم إفلاته عن طريق إنهاء تشغيل الملف الصوتي

00:02:05.150 --> 00:02:08.250
أو بسبب إيقاف النشاط الآن فقط لاختبار الجهاز.

00:02:10.370 --> 00:02:12.590
والآن مع هذا الإصدار الجديد للتطبيق الذي يعمل في
جهازي،

00:02:12.590 --> 00:02:16.170
عندما أضغط على أي نشاط فئة، وليكن نشاط الأرقام.

00:02:16.170 --> 00:02:18.495
يمكنني تشغيل صوت كل كلمة كما  المعتاد.

00:02:18.495 --> 00:02:20.590
&gt;&gt; [INAUDIBLE].

00:02:20.590 --> 00:02:22.400
&gt;&gt; ولكن الآن عند تشغيل أي ملف صوتي

00:02:22.400 --> 00:02:25.340
ثم مغادرة التطبيق على الفور بالضغط على زر الصفحة
الرئيسية للجهاز

00:02:25.340 --> 00:02:29.230
يجب أن يتوقف الصوت على الفور لأن الكود في وظيفة
onStop.

00:02:29.230 --> 00:02:30.555
هيا بنا نجرّب.

00:02:30.555 --> 00:02:33.130
&gt;&gt; [INAUDIBLE].

00:02:33.130 --> 00:02:35.780
&gt;&gt; حسنًا، إنه يعمل كما توقعنا،

00:02:35.780 --> 00:02:38.570
وكما ذكرنا سابقًا سيستمر نطق كل كلمة حتى بعد مغادرة
النشاط

00:02:38.570 --> 00:02:42.480
والآن توقف تمامًا عندما غادرت النشاط.

00:02:42.480 --> 00:02:44.600
حسنًا، كما نرى المنطق يعمل كم هو متوقع.

00:02:44.600 --> 00:02:46.810
والآن سأكرر الشيء ذاته مع جميع الأنشطة الأخرى.

00:02:47.930 --> 00:02:52.660
ولذا وظيفة onStop هنا تمت الكتابة فوقها في نشاط
الأكواد

00:02:52.660 --> 00:02:53.420
ونشاط العائلة.

00:02:55.300 --> 00:02:56.780
وفي النهاية في نشاط العبارات.

00:02:57.860 --> 00:03:00.810
هيا بنا نشغل التطبيق مرة أخرى للتأكد من أن جميع
الأنشطة

00:03:00.810 --> 00:03:01.911
تعمل كما هو متوقع.

00:03:01.911 --> 00:03:06.299
[BLANK_AUDIO]

00:03:06.299 --> 00:03:16.299
[FOREIGN]

