WEBVTT
Kind: captions
Language: zh-CN

00:00:00.240 --> 00:00:01.160
浏览我们的代码并

00:00:01.160 --> 00:00:04.320
于测验所指定的地方 添加日志消息

00:00:04.320 --> 00:00:06.480
在 Earthquake Activity onCreate() 方法中

00:00:06.480 --> 00:00:08.210
当地震活动调用 onCreate() 方法时进行记录

00:00:08.210 --> 00:00:12.130
当我们调用 loaderManager.initLoader 时进行记录

00:00:12.130 --> 00:00:15.160
如你所见 撤销加载程序 回调时同样会打印

00:00:15.160 --> 00:00:19.080
例如 调用 onCreateLoader 函数或

00:00:19.080 --> 00:00:20.970
调用 onLoadFinished 方法 以及

00:00:20.970 --> 00:00:24.560
最后调用 onLoaderReset 时

00:00:24.560 --> 00:00:28.123
我们同样会在调用 onStartLoading() 以及调用

00:00:28.123 --> 00:00:29.754
loadInBackground() 时打印消息

00:00:29.754 --> 00:00:36.230
最后 我们会在调用 fetchEarthquakeData() 方法时打印日志

00:00:36.230 --> 00:00:37.826
当在设备上运行应用时

00:00:37.826 --> 00:00:40.689
我可以开始在系统日志中 查看在此打印出的日志消息

00:00:40.689 --> 00:00:44.180
其中会详细描述代码中 所发生行为的顺序

00:00:44.180 --> 00:00:46.290
现在首先启动该活动 以便

00:00:46.290 --> 00:00:50.200
我们可以看到正在调用 onCreate() 方法 随后为 initLoader()

00:00:51.560 --> 00:00:54.030
因为现在还没有 加载程序实例

00:00:54.030 --> 00:00:56.150
所以要调用我们的 onCreateLoader 回调

00:00:56.150 --> 00:00:58.891
之后 earthquakeLoader 将进行实例化 并

00:00:58.891 --> 00:01:00.990
调用 onStartLoading()

00:01:00.990 --> 00:01:05.269
随后 loadInBackground() 会在后台线程上运行

00:01:05.269 --> 00:01:08.500
最后 我们将看到执行 查询工具的 fetchEarthquakeData

00:01:08.500 --> 00:01:10.060
方法

00:01:10.060 --> 00:01:13.290
此时 我们从服务器获得响应 并将其粘贴到作为加载程序

00:01:13.290 --> 00:01:16.520
结果返回的地震对象 列表中

00:01:16.520 --> 00:01:21.385
最后 我们会看到 onLoad finished() 并且该活动已随

00:01:21.385 --> 00:01:25.405
此地震对象列表被调用 接下来 我们则可以成功更新 UI

00:01:25.405 --> 00:01:28.085
现在 你会意识到 旋转设备不会触发新的

00:01:28.085 --> 00:01:29.555
网络请求

00:01:29.555 --> 00:01:31.225
因此 尽管再次 创建该活动

00:01:31.225 --> 00:01:35.190
在我们调用 initLoader 时 加载程序实例已经存在 因此

00:01:35.190 --> 00:01:38.960
我们重新使用了现有的加载程序 该加载程序已经具有网络响应

00:01:38.960 --> 00:01:42.300
现在 你还可以继续尝试使用其他方式 退出或进入应用

00:01:42.300 --> 00:01:43.830
你会发现 如果你 单击主屏幕 (home) 按钮

00:01:43.830 --> 00:01:46.080
会返回到应用 再次触发完全加载

00:01:46.080 --> 00:01:47.450
现在就清楚啦

00:01:47.450 --> 00:01:50.615
因为 你想一想 如果 用户退出应用后再返回

00:01:50.615 --> 00:01:53.653
我们则会刷新数据 因此他们 会具有最新的地震信息

