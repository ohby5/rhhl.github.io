WEBVTT
Kind: captions
Language: zh-CN

00:00:00.240 --> 00:00:02.580
有时候应用没有数据可显示

00:00:02.580 --> 00:00:06.840
例如 某人的邮件收件箱里可能 没有新的消息 所以

00:00:06.840 --> 00:00:10.380
我们作为开发人员就需要恰当地 处理这种情况

00:00:10.380 --> 00:00:13.280
例如 设计较好的应用甚至尝试 通过放置某些可爱的图像

00:00:13.280 --> 00:00:16.370
让用户获得比较愉快的 体验

00:00:16.370 --> 00:00:20.000
甚至还有更好的应用会用一些 初学者内容或如何入门的建议

00:00:20.000 --> 00:00:21.610
来填充空白区域

00:00:21.610 --> 00:00:24.420
这些会根据应用的适用 内容而发生变化

00:00:24.420 --> 00:00:27.860
现在 让我们来看一个非常简单的空白状态

00:00:27.860 --> 00:00:31.110
此状态明确表示 未发现地震

00:00:31.110 --> 00:00:33.690
这比显示空白屏幕 要好很多

00:00:33.690 --> 00:00:36.360
现在 欢迎你对此进行扩展 让空白状态

00:00:36.360 --> 00:00:39.640
在将来变得更精致 但是 USGS web 服务器

00:00:39.640 --> 00:00:44.010
是否还会返回零个地震 这问题就不同了

00:00:44.010 --> 00:00:45.560
并且无论如何 我们的应用

00:00:45.560 --> 00:00:49.380
最好包括逻辑以便在发生这种 场景时进行处理

00:00:49.380 --> 00:00:52.610
幸运的是 Android 架构团队 已经预计到这将会是

00:00:52.610 --> 00:00:54.290
一种常见用例

00:00:54.290 --> 00:00:57.970
所以他们为开发人员提供了一个 方法 即为 ListView 设置

00:00:57.970 --> 00:01:02.240
空白视图 该视图仅在列表中 没有数据时显示

00:01:02.240 --> 00:01:03.940
这就意味着适配器的数据集为空

00:01:05.050 --> 00:01:06.180
在此编码任务中

00:01:06.180 --> 00:01:09.260
你将要在 Quake Report 应用中 执行此行为

00:01:09.260 --> 00:01:12.170
首先应该做的是 修改 earthquake activity 的

00:01:12.170 --> 00:01:15.460
xml 布局 以便获得包含两个 子视图（ListView

00:01:15.460 --> 00:01:18.980
和空白视图的 TextView）的 视图组

00:01:20.220 --> 00:01:23.900
现在 空白视图和 ListView 应为父视图组中的

00:01:23.900 --> 00:01:26.748
同级对象 两个同级对象应重叠

00:01:26.748 --> 00:01:29.540
ListView 应占据屏幕的 全部高度和宽度

00:01:29.540 --> 00:01:32.720
而 TextView 应位于整个 屏幕的中央

00:01:32.720 --> 00:01:35.490
更新布局之后 我希望你更改

00:01:35.490 --> 00:01:39.720
EarthquakeActivity java 类 以便 在 oncreate 方法中 在

00:01:39.720 --> 00:01:44.410
ListView 对象上设置空白视图 方法并传入空白视图

00:01:44.410 --> 00:01:47.160
这里是 setEmptyView 方法的 文档

00:01:47.160 --> 00:01:50.070
文档介绍了列表中没有 项目时

00:01:50.070 --> 00:01:54.390
条目框架将会隐藏 ListView 并显示此 EmptyView

00:01:54.390 --> 00:01:58.150
但是如果存在条目 则会显示 ListView 并

00:01:58.150 --> 00:02:00.150
隐藏此 EmptyView

00:02:00.150 --> 00:02:03.150
应用会自动为你处理所有这些变更 和视图可见性

00:02:03.150 --> 00:02:05.480
非常贴心

00:02:05.480 --> 00:02:09.139
我要警告大家的是  当你首次启动应用时

00:02:09.139 --> 00:02:12.060
应用中还没有数据 因为我们尚未完成加载

00:02:12.060 --> 00:02:15.170
为避免首次加载数据时 暂时在屏幕上

00:02:15.170 --> 00:02:18.182
闪现“未发现地震”消息 只能在

00:02:18.182 --> 00:02:23.290
首次加载完成之后分配 空白状态 TextView 的文本

00:02:23.290 --> 00:02:26.020
因此 此处采用 onLoadFinished 方法

00:02:26.020 --> 00:02:29.070
现在 你能想个办法验证一下 空白视图是否有效吗?

00:02:29.070 --> 00:02:30.350
给你一点提示

00:02:30.350 --> 00:02:32.820
你想临时为一些代码 添加注释

00:02:32.820 --> 00:02:35.010
完成后请选中这些复选框

00:02:35.010 --> 00:02:36.200
然后你可以尝试额外挑战

00:02:36.200 --> 00:02:39.379
你知道有些 Android 应用 尝试让空白状态

00:02:40.990 --> 00:02:43.210
变成愉快的用户体验吗?

00:02:43.210 --> 00:02:45.880
想一想并在测验下面链接的 讨论论坛中分享屏幕截图

