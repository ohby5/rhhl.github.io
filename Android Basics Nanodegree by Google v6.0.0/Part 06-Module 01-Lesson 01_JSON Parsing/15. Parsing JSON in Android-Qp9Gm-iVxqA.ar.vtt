WEBVTT
Kind: captions
Language: ar

00:00:00.334 --> 00:00:01.568
‫بعد كل ذلك التدريب..

00:00:01.667 --> 00:00:04.268
‫نأمل أنك تفهمت كيف نتعرف مكونات JSON

00:00:04.534 --> 00:00:06.601
‫وكيف تتجول عبر شجرة كائنات JSON

00:00:06.734 --> 00:00:09.001
‫لتستخرج القيم التي نريدها

00:00:10.200 --> 00:00:13.200
‫تحويل عبارة JSON إلى كائن JSON مباشر..

00:00:13.334 --> 00:00:14.467
‫أو مصفوفة JSON..

00:00:14.667 --> 00:00:16.067
‫يتطلب التفسير (Parsing)

00:00:16.334 --> 00:00:18.768
‫التفسير من أسس علوم الحاسب

00:00:19.133 --> 00:00:22.767
‫ويعني ببساطة أن الكمبيوتر
‫يقرأ بعض النصوص بلغة يعرفها..

00:00:23.000 --> 00:00:26.100
‫ويحولها إلى تمثيل آخر أكثر إفادة..

00:00:26.901 --> 00:00:28.034
‫مثل كائن JSON

00:00:28.367 --> 00:00:30.168
‫يمكننا استدعاء وظائف عليه..

00:00:30.334 --> 00:00:32.367
‫ونستخرج البيانات التي نحتاجها منه

00:00:33.467 --> 00:00:36.134
‫نعرف الآن كيف نفسر JSON
‫باستخدام عقولنا..

00:00:36.434 --> 00:00:39.368
‫عبر تعريف أزواج المفاتيح والقيم
‫والتنقل عبرها

00:00:39.934 --> 00:00:43.334
‫ولكننا نحتاج لأن نعرف كيف
‫نطبق هذه العملية في جافا

00:00:44.000 --> 00:00:45.267
‫لذا لنتحدث عن هذا

00:00:47.000 --> 00:00:49.000
‫إذاً ذهبت إلى متصفحي..

00:00:49.601 --> 00:00:54.468
‫وأنظر إلى التوثيقات الرسمية لآندرويد
‫في موقع developer.android.com

00:00:54.934 --> 00:00:57.835
‫لحسن الحظ، توجد فئة تُدعى JSONObject

00:00:58.167 --> 00:01:00.768
‫والتي تسهل تحويل عبارة JSON بسيطة..

00:01:00.901 --> 00:01:02.568
‫إلى كائن أكثر ذكاء بكثير

00:01:03.000 --> 00:01:05.100
‫كائن يدري ما المفاتيح التي يحويها

00:01:05.300 --> 00:01:07.300
‫وكيف يصل إلى القيم المقترنة بها

00:01:08.067 --> 00:01:10.067
‫إذا مررت إلى قسم الملخص..

00:01:10.200 --> 00:01:14.367
‫يمكننا مراجعة الدوال الإنشائية المتاحة
‫لنستخدمها في إنشاء نسخة..

00:01:14.434 --> 00:01:16.834
‫أو كائن من فئة JSONObject

00:01:17.701 --> 00:01:20.768
‫ها نحن ذا، هذه هي الدالة
‫الإنشائية التي نريدها بالتحديد

00:01:21.000 --> 00:01:26.801
‫تسمح الدالة ببناء كائن JSON، عبر تمرير
‫عبارة JSON وحيدة، تحوي نص JSON خام

00:01:28.367 --> 00:01:31.335
‫الآن نرى أن لدينا مجموعة كبيرة
‫من وظائف الجلب..

00:01:31.434 --> 00:01:33.434
‫يمكننا استدعاءها في نسخة
‫كائن JSONObject..

00:01:33.501 --> 00:01:36.035
‫لاستعادة القيم المقترنة بمفاتيح معينة

00:01:36.801 --> 00:01:38.135
‫كما تعرف بالفعل..

00:01:38.334 --> 00:01:40.901
‫توجد مكونات JSON متباينة، تتراوح من..

00:01:41.300 --> 00:01:43.700
‫أنواع بيانات أولية، كالأعداد الصحيحة

00:01:43.901 --> 00:01:47.769
‫إلى أنواع بيانات أكبر مثل
‫كائنات JSON ومصفوفات JSON

00:01:48.667 --> 00:01:49.700
‫على سبيل المثال..

00:01:49.801 --> 00:01:53.735
‫إذا أردنا استخراج عدداً صحيحاً،
‫فيمكننا استدعاء وظيفة الجلب (GetInt)

00:01:54.100 --> 00:01:56.167
‫ونمرر اسم المفتاح كسلسلة حرفية

00:01:56.734 --> 00:01:59.134
‫لدينا نمط مشابه لنحصل
‫على (مزدوج Double)

00:02:00.334 --> 00:02:01.534
‫أو جلب سلسلة حرفية

00:02:02.801 --> 00:02:07.135
‫في كائنات JSON الأكبر.. يمكنك استدعاء
‫getJSONArray..

00:02:07.501 --> 00:02:09.469
‫لجلب مصفوفة JSON المقترنة
‫باستخدام مفتاحها

00:02:09.734 --> 00:02:12.668
‫لاحظ أن نوع البيانات المرتجعة
‫بهذه الوظيفة الجالبة..

00:02:12.868 --> 00:02:14.068
‫هو نوع مصفوفة JSON

00:02:14.734 --> 00:02:17.134
‫وبالمثل، يمكنك استدعاء getJOSNObject&gt;&gt;

00:02:17.334 --> 00:02:18.768
‫لتسترجع JSONObject

00:02:19.334 --> 00:02:22.534
‫ولاحظ أن نوع البيانات المرتجع
‫هنا هو JSONObject

00:02:24.300 --> 00:02:25.500
‫لننقر ونتعمق أكثر..

00:02:26.000 --> 00:02:28.968
‫لاحظ الآن أنه كلما حاولت طلب
‫جلب على JSONObject..

00:02:29.367 --> 00:02:31.367
‫قد لا يوجد المفتاح المطلوب..

00:02:31.701 --> 00:02:35.101
‫وفي هذه الحالة، سينتج عن الطلب خطأ JSON
‫أو JSONException

00:02:35.501 --> 00:02:37.135
‫ويتعين علينا التقاطه والتعامل معه

00:02:37.667 --> 00:02:38.734
‫أو كبديل..

00:02:38.901 --> 00:02:41.934
‫فهنالك وظائف (opt) التي يمكن
‫استدعاؤها على كائن JSON..

00:02:42.200 --> 00:02:44.801
‫حيث تعني (opt) زوج مفتاح وقيمة اختياري

00:02:45.267 --> 00:02:47.934
‫هذه الوظائف تجلب القيمة
‫المقترنة بمفتاح معين..

00:02:48.033 --> 00:02:50.200
‫وترجع (لا) إن لم توجد القيمة

00:02:52.033 --> 00:02:54.066
‫لنفسر هذا المقتطف من JSON

00:02:54.434 --> 00:02:55.834
‫لدينا الكائن الجذر..

00:02:56.200 --> 00:02:58.101
‫وبه مفتاح واحد اسمه (حلوى)

00:02:58.968 --> 00:03:00.502
‫يقترن المفتاح بمصفوفة..

00:03:00.734 --> 00:03:03.101
‫بسبب هذين القوسين المربعين

00:03:04.234 --> 00:03:06.068
‫والذي يحتوي كائن JSON آخر..

00:03:06.501 --> 00:03:08.369
‫هنا بين هذين القوسين المعقوفين

00:03:09.000 --> 00:03:11.467
‫الكائن الداخلي يحتوي مفتاحين..

00:03:11.834 --> 00:03:15.201
‫أحدهما (الاسم) والمقترن
‫بالقيمة عبارة (جيلي بينز)

00:03:15.801 --> 00:03:20.635
‫ومفتاح آخر اسمه (العدد) ويقترن
‫بالعدد الصحيح (10)

00:03:21.734 --> 00:03:24.101
‫لنر كيف سيبدو مسار التجول

00:03:24.267 --> 00:03:27.201
‫إن أردنا استخراج البيانات
‫المقترنة بهذه المفاتيح

00:03:27.734 --> 00:03:30.435
‫إذاً.. للبيانات (جيلي بينز)..

00:03:30.734 --> 00:03:32.934
‫نريد أن نبدأ من جذر بيانات JSON..

00:03:33.133 --> 00:03:34.133
‫ها هو الجذر..

00:03:34.434 --> 00:03:37.968
‫ثم نذهب إلى المؤشر
‫حيث المفتاح (حلوى)..

00:03:38.100 --> 00:03:40.801
‫والذي سيُرجع إلينا مصفوفة JSON

00:03:41.601 --> 00:03:44.035
‫ثم نريد الحصول على أول عنصر في المصفوفة

00:03:44.267 --> 00:03:46.601
‫وهو كائن JSON الوحيد هذا

00:03:47.267 --> 00:03:50.235
‫ثم ببساطة تحصل على القيمة
‫النصية للمفتاح (الاسم)

00:03:50.701 --> 00:03:52.635
‫وهو في هذه الحالة (جيلي بينز)

00:03:53.868 --> 00:03:56.901
‫الآن، مسار التجوال لجلب قيمة (العدد)

00:03:57.601 --> 00:03:59.235
‫كسابقه، نبدأ من الجذر..

00:03:59.767 --> 00:04:03.234
‫ثم نذهب إلى مؤشر المفتاح والقيمة
‫باستخدام المفتاح (حلوى)

00:04:03.901 --> 00:04:05.435
‫ثم إلى مصفوفة JSON

00:04:05.968 --> 00:04:09.702
‫ثم نريد الحصول على أول عنصر
‫من المصفوفة، وهو كائن JSON

00:04:10.300 --> 00:04:15.067
‫ثم ندخل مؤشر المفتاح لجلب
‫القيمة الممثلة بالمفتاح (العدد)

00:04:15.334 --> 00:04:18.235
‫وهو في هذه الحالة عدد صحيح قيمته 10

00:04:19.901 --> 00:04:22.368
‫نريد الآن أخذ عملية التجول
‫عبر المسار هذه..

00:04:22.467 --> 00:04:24.867
‫ونربطها بجمل يمكننا كتابتها في كود جافا

00:04:25.067 --> 00:04:26.400
‫لذا لنذهب لنلقي نظرة

00:04:27.400 --> 00:04:30.800
‫لنفرض أننا مُنحنا نص JSON هذا
‫على اليسار

00:04:31.367 --> 00:04:35.101
‫في الواقع، غالباً سنتلقى نسخة مضغوطة

00:04:35.300 --> 00:04:39.967
‫وهي النسخة نفسها محذوف منها الفراغات
‫البيضاء، وتم (تبديل) علامات التنصيص

00:04:40.267 --> 00:04:43.834
‫وما نعنيه (بالتبديل) هو إضافة
‫شرطة مائلة عكسية قبلها

00:04:44.334 --> 00:04:46.768
‫حيث لا يمكنك استخدام علامات التنصيص
‫في منتصف سلسلة حرفية

00:04:46.868 --> 00:04:48.769
‫وإلا فكيف سنعرف أين تنتهي السلسلة؟

00:04:49.000 --> 00:04:51.400
‫مكننا تحويل متغير السلسلة
‫الحرفية candyJson..

00:04:51.734 --> 00:04:53.235
‫إلى JSONObjevy مباشر..

00:04:53.334 --> 00:04:56.868
‫عبر تمرير السلسلة الحرفية
‫إلى دالة JSONObject الإنشائية

00:04:57.501 --> 00:05:00.968
‫الآن، قام JSONObject بكل التفسير
‫اللازم نيابة عنا

00:05:01.367 --> 00:05:04.934
‫وأصبح يعرف ما المفاتيح التي تحتويها،
‫وكل أنواع الوظائف المفيدة

00:05:06.234 --> 00:05:07.901
‫على سبيل المثال للكائن الجذر..

00:05:08.100 --> 00:05:09.801
‫لنستدعي getJSONArray..

00:05:10.534 --> 00:05:13.868
‫لنجد المصفوفة المحتواة في الكائن
‫الجذر ذات المفتاح (حلوى)

00:05:14.901 --> 00:05:18.168
‫يمكننا تخزين هذا في المتغير JSONArray

00:05:18.634 --> 00:05:20.502
‫ونوع بياناته JSONArray

00:05:21.567 --> 00:05:24.301
‫الآن فئة JSONArray تكشف وظيفة..

00:05:24.801 --> 00:05:26.335
‫تُسمى getJSONObject..

00:05:26.667 --> 00:05:29.635
‫للوصول إلى الكائن
‫في موضع مؤشر معين

00:05:30.167 --> 00:05:32.801
‫لذا يمكننا الحصول على كائن JSON
‫في الموضع صفر من المصفوفة

00:05:33.133 --> 00:05:35.101
‫أي الأول في القائمة

00:05:35.634 --> 00:05:39.502
‫ويمكننا تخزين ذلك الكائن
‫في المتغير firstCandy

00:05:39.968 --> 00:05:41.335
‫من النوع JSONObject

00:05:43.067 --> 00:05:46.434
‫ولأننا نريد إيجاد الخصائص
‫في JSONObject..

00:05:46.968 --> 00:05:48.769
‫يمكننا استدعاء وظيفة getString..

00:05:48.801 --> 00:05:52.001
‫لاستخراج القيمة من النوع الأولي
‫والمقترنة بالمفتاح (name)

00:05:52.200 --> 00:05:53.801
‫في هذه الحالة هي (جيلي بينز)

00:05:54.801 --> 00:05:55.801
‫شبيه لذلك..

00:05:55.901 --> 00:05:59.068
‫يمكننا استدعاء الوظيفة getInt
‫على الكائن candyJson الأول..

00:05:59.334 --> 00:06:02.268
‫لاستخراج القيمة العددية للمفتاح (count)

00:06:02.601 --> 00:06:04.202
‫وفي هذه الحالة فالقيمة هي 10

00:06:05.467 --> 00:06:06.701
‫في الاختبار التالي..

00:06:06.868 --> 00:06:10.402
‫أريدك أن تقرأ الدرس الموضح رابطه
‫حول تفسير JSON في آندرويد

00:06:10.934 --> 00:06:15.067
‫سيكون هذا المثال أعقد قليلاً
‫عن مثال (الحلوى) الذي رأيناه سوية

00:06:15.601 --> 00:06:17.868
‫ولكني أريدك أن تحاول قدر ما تستطيع

00:06:18.367 --> 00:06:20.534
‫وتحديداً أن تحاول قراءة وفهم..

00:06:20.767 --> 00:06:22.234
‫الكود في MainActivity.java

00:06:22.934 --> 00:06:24.201
‫حدد هذا عندما تنتهي

