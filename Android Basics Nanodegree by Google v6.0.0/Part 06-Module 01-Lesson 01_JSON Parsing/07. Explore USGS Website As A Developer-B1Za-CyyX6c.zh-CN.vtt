WEBVTT
Kind: captions
Language: zh-CN

00:00:00.500 --> 00:00:03.860
这些都很不错 但我们最终 想要达到的目标是

00:00:03.860 --> 00:00:07.190
做出某种能够让应用理解的 实时数据

00:00:08.270 --> 00:00:12.380
继续之前讲到的类比 “得来速”数据 我们要使用一个 API

00:00:12.380 --> 00:00:18.000
从而让应用可以根据需要请求并使用 来自 USGS 站点的数据

00:00:18.000 --> 00:00:21.797
我们来看左侧的开发人员 (For Developers) 部分

00:00:21.797 --> 00:00:23.556
选择 API 文档 (API Documentation)

00:00:23.556 --> 00:00:28.519
设立此文档是为了帮助我们了解 如何构建正确的 URL

00:00:28.519 --> 00:00:32.631
查询站点以获取某一种 想要的数据类型

00:00:32.631 --> 00:00:37.699
在顶部 文档在这里写明了 我们需要查询的 URL

00:00:37.699 --> 00:00:42.693
然后 在末尾处给出了 另两个成分

00:00:42.693 --> 00:00:46.497
会转到方法 还有 一些参数

00:00:46.497 --> 00:00:49.464
这一部分是有效方法的列表 位于 URL 下方

00:00:49.464 --> 00:00:53.853
有很多选项 其中大部分方法 都用于检索有关

00:00:53.853 --> 00:00:55.095
API 本身的元数据

00:00:55.095 --> 00:00:59.008
向下滚动 找到名为查询 (query) 的方法

00:00:59.008 --> 00:01:03.347
这就应该是用于提交 数据请求的方法

00:01:03.347 --> 00:01:07.190
这里的定义也说明它可以用于提交 数据请求

00:01:07.190 --> 00:01:10.564
接下来 是可用的 查询参数

00:01:10.564 --> 00:01:15.605
第一个参数指定 USGS 向我们发送 数据时使用的格式

00:01:15.605 --> 00:01:19.944
相关内容稍后会详细讨论 然后 我们还有关于

00:01:19.944 --> 00:01:24.484
感兴趣时间段的查询参数 还有提取位置的多种方式

00:01:24.484 --> 00:01:28.822
以及其他约束结果的方式 例如 限制返回

00:01:28.822 --> 00:01:31.193
结果的数量 或最大深度、

00:01:31.193 --> 00:01:35.110
最大震级、最小深度、 最小震级等

00:01:36.130 --> 00:01:40.030
接下来 我们到浏览器中试一试 看看会返回什么内容

00:01:40.030 --> 00:01:43.838
例如 我想要获取有关 昨天发生地震的列表

00:01:43.838 --> 00:01:48.161
我要键入此 URL  添加查询方法

00:01:48.161 --> 00:01:53.874
然后 添加关于开始时间到 结束时间的参数

00:01:53.874 --> 00:01:58.324
在这里 我使用的日期是 2016-05-02 和

00:01:58.324 --> 00:02:03.487
2016-05-03  让两个日期相隔仅一天

00:02:03.487 --> 00:02:08.586
使用的是非常具体的格式 年 - 月 - 日

00:02:08.586 --> 00:02:12.909
最后 添加 format=geojson

00:02:12.909 --> 00:02:17.521
为什么要添加这个呢？因为 JSON 这种格式是非常适合

00:02:17.521 --> 00:02:22.133
与 API 数据一同使用的 而 GeoJSON 是 JSON 的一种特殊类型

00:02:22.133 --> 00:02:25.327
专门用于描述 地理相关信息

00:02:25.327 --> 00:02:28.724
稍后 我们会在本课程中 详细介绍 JSON

00:02:28.724 --> 00:02:30.710
现在 按下 Enter 键 观察返回内容

00:02:31.880 --> 00:02:34.017
非常好 返回了这么多代码

00:02:34.017 --> 00:02:37.730
以目前的状态来看 可读性 还不是很高 但是

00:02:37.730 --> 00:02:40.498
我们可以使用格式工具效果 来进行一些设置

00:02:40.498 --> 00:02:44.946
把这些代码复制粘贴到 JSON pretty printer 中

00:02:44.946 --> 00:02:48.146
就可以得到可读性更高的代码

00:02:48.146 --> 00:02:52.553
那么 我将代码粘贴到这里 然后单击按钮 好了

00:02:52.553 --> 00:02:54.240
这样读起来容易多了

00:02:55.620 --> 00:02:59.310
可以一目了然地看到地震事件 经过分组 组成了多个称为

00:02:59.310 --> 00:03:04.070
features 的节点 对于某给定的 feature 可以看到震级

00:03:04.070 --> 00:03:08.760
地点和时间

00:03:09.990 --> 00:03:13.785
顺便说一下 这里用来表达时间 的方式很特别

00:03:13.785 --> 00:03:16.404
事实上 这种方式称为 Unix 时间戳

00:03:16.404 --> 00:03:19.986
计算机一般都会使用 Unix 时间戳 因为它是整数

00:03:19.986 --> 00:03:24.190
因此无论是两个日期之间的计算 或者其他类型的数学运算

00:03:24.190 --> 00:03:27.040
使用整数相对而言 都比较容易

00:03:27.040 --> 00:03:31.781
Unix 时间戳是根据自 1970 年 1 月 1 日开始经过的

00:03:31.781 --> 00:03:34.921
秒数来定义的

00:03:34.921 --> 00:03:39.604
顺便说一下 要在软件中显示日期和时间 也无需担心

00:03:39.604 --> 00:03:41.517
还有很多库和

00:03:41.517 --> 00:03:45.550
其他方法可以提供可读性更高 的方式来表达日期和时间

00:03:45.550 --> 00:03:50.626
从列表中可以看出 通常 震级的值非常低

00:03:50.626 --> 00:03:53.697
0.1 级地震大家是感觉不到的

00:03:53.697 --> 00:03:59.097
我们假设只关注 4.5 或以上震级的

00:03:59.097 --> 00:03:59.699
地震

00:03:59.699 --> 00:04:04.652
那么 我们应该在 URL 中添加什么查询参数 才能只显示

00:04:04.652 --> 00:04:06.340
那些较大规模的地震呢？

00:04:07.520 --> 00:04:11.280
在快速浏览文档后 我发现

00:04:11.280 --> 00:04:15.779
使用 magnitude 可以返回 大于指定值的事件

00:04:15.779 --> 00:04:17.197
所以输入 magnitude

00:04:17.197 --> 00:04:21.367
现在 我要继续 选中全部代码

00:04:21.367 --> 00:04:24.895
把代码粘贴到 JSON pretty print 中

00:04:24.895 --> 00:04:27.135
现在 我们来看看 具体有哪些内容

00:04:27.135 --> 00:04:31.383
果然 我直接可以看到 震级 4.7 的地震

00:04:31.383 --> 00:04:33.342
向下滚动

00:04:33.342 --> 00:04:38.193
看到 4.5、4.6

00:04:38.193 --> 00:04:39.807
另一个 4.6

00:04:39.807 --> 00:04:42.143
看来这正是 想要的效果

00:04:42.143 --> 00:04:42.703
非常好

00:04:42.703 --> 00:04:46.260
还可以对 URL 进行 何种修改呢？

00:04:46.260 --> 00:04:47.070
现在 轮到你

00:04:47.070 --> 00:04:51.820
来阅读文档 独立 探索发现了

00:04:51.820 --> 00:04:56.560
在这张表格中 用自己的话 为列出的各个参数

00:04:56.560 --> 00:04:58.530
写出恰当描述

00:04:58.530 --> 00:05:01.420
使用课堂讲义中的数据 输入链接 获取

00:05:01.420 --> 00:05:03.310
USGS 地震数据

00:05:03.310 --> 00:05:05.770
根据偏好 可以将其放入 格式化程序中

00:05:05.770 --> 00:05:09.390
然后猜一猜 每种数据类型的 用途都是什么

