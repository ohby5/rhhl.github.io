WEBVTT
Kind: captions
Language: ar

00:00:00.300 --> 00:00:04.367
‫نحتاج لتعديل تطبيق تقرير الزلازل ليُفسر
‫استجابة JSON من مُلقمات USGS..

00:00:04.500 --> 00:00:06.833
‫ويحولها إلى قائمة مصفوفة من الزلازل

00:00:07.167 --> 00:00:11.367
‫لذا أطلب منك أولاً نسخ فئة QueryUtils
‫المتاحة في هذا الرابط..

00:00:11.800 --> 00:00:14.000
‫حدد كل النص وانسخه

00:00:14.467 --> 00:00:19.067
‫ثم في آندرويد ستوديو، أنشئ ملف
‫فئة جافا جديدة اسمه QueryUtils

00:00:19.600 --> 00:00:21.733
‫يمكنك إزالة مقطع الكود الافتراضي

00:00:21.867 --> 00:00:23.267
‫ثم لصق هذه المحتويات

00:00:23.767 --> 00:00:26.434
‫لنطوي هذه النافذة لتسهل قراءة الملف

00:00:27.000 --> 00:00:30.433
‫يمكنك تصفح الكود سريعاً لتألفه،
‫ودعنا نراجعه الآن

00:00:31.000 --> 00:00:33.900
‫في هذه الفئة لدينا ثابت سلسلة
‫حرفية مكتوب كله بحروف كبيرة

00:00:33.967 --> 00:00:35.734
‫واسمه SAMPLE_JSON_RESPONSE

00:00:36.133 --> 00:00:38.266
‫وحيث أنه قيمة ثابت نهائية..

00:00:38.467 --> 00:00:40.300
‫فهذا يعني أن القيمة لن تتغير أبداً

00:00:40.433 --> 00:00:44.133
‫لذا تذكر هذا عندما نغير ليساوي
‫الاستجابة من استعلام USGS

00:00:44.633 --> 00:00:48.700
‫الرموز الخاصة مثل علامات التنصيص
‫(تُبدل) بالشرطة المائلة العكسية

00:00:49.233 --> 00:00:53.566
‫ثم لدينا دالة إنشائية خاصة، بما يعني
‫أنه لا يمكن إنشاء نسخة من هذه الفئة

00:00:53.833 --> 00:00:57.933
‫فهي فئة أداة ولذا تحوي
‫متغيرات ووظائف استاتيكية

00:00:58.033 --> 00:01:02.233
‫حيث يمكنك استدعاء الوظيفة مباشرة
‫دون الحاجة لنسخة كائن من الوظيفة

00:01:02.533 --> 00:01:05.600
‫الوظيفة الأهم هي هذه الوظيفة
‫الاستاتيكية العامة..

00:01:05.700 --> 00:01:07.500
‫باسم extractEarthquakes

00:01:07.633 --> 00:01:11.466
‫وهي بلا مُدخلات وتجيب
‫بقائمة مصفوفة من الزلازل

00:01:11.967 --> 00:01:15.167
‫بداخل الوظيفة، ننشئ قائمة
‫مصفوفة زلالزل فارغة..

00:01:15.300 --> 00:01:17.300
‫ونجيب بها في نهاية الوظيفة

00:01:18.067 --> 00:01:19.634
‫كما لدينا مقطع try..

00:01:19.767 --> 00:01:23.400
‫والذي سيتولى معالجة أية أخطاء
‫من كود تفسير JSON

00:01:23.733 --> 00:01:27.000
‫سنتحدث عن مقاطع try في جافا
‫في الدرس التالي

00:01:27.300 --> 00:01:31.200
‫أما للآن، فلدينا مهمة وحيدة في
‫هذه الوظيفة تركناها لك لتكملها

00:01:31.300 --> 00:01:32.633
‫لذا لنكتب هذا سوية

00:01:33.067 --> 00:01:36.500
‫يمكنك استخدام الكود الزائف الذي زودناك
‫به لإرشادك أثناء كتابة الكود

00:01:36.900 --> 00:01:40.233
‫أولاً ننشئ كائن JSON الجذر
‫عبر استدعاء الدالة الإنشائية

00:01:40.400 --> 00:01:42.567
‫ونمرر لها نص JSON العينة

00:01:43.000 --> 00:01:47.000
‫هذه الفئة ستفسر كامل استجابة GeoJSON
‫المجلوبة من واجهة برمجة USGS

00:01:47.233 --> 00:01:50.733
‫ثم نخزن الكائن في متغير اسمه
‫baseJsonResponse

00:01:51.233 --> 00:01:54.733
‫الآن فإننا ننظر إلى قوة
‫ومكان وتوقيت الزلزال

00:01:54.900 --> 00:01:58.033
‫لنصل إلى تلك المعلومات،
‫نحتاج أولاً مصفوفة الخصائص

00:01:58.300 --> 00:01:59.933
‫في كائن JSON الجذر..

00:02:00.033 --> 00:02:02.433
‫نريد جلب القيم المقترنة
‫بمفتاح الخصائص

00:02:02.667 --> 00:02:05.867
‫والتي يفترض اقترانها بمصفوفة JSON
‫تحوي قائمة الزلازل

00:02:06.267 --> 00:02:08.367
‫لنستدعي وظيفة getJSONArray..

00:02:08.533 --> 00:02:10.366
‫على الكائن
‫baseJsonResponse

00:02:10.433 --> 00:02:12.833
‫ممررين مفتاح (الخصائص) كسلسلة حرفية

00:02:13.500 --> 00:02:17.967
‫ويمكننا حينها تخزين النتيجة في متغير
‫مصفوفة الزلازل، ونوعه JSONArray

00:02:18.400 --> 00:02:21.500
‫في هذه المرحلة، نريد إنشاء
‫حلفة عبر مصفوفة الزلازل..

00:02:21.600 --> 00:02:22.767
‫ولنبدأ بحلقة for

00:02:23.100 --> 00:02:27.733
‫إن أردت مراجعة الحلقات وحلقات for،
‫راجع فيديو الدورة السابقة في الملاحظات

00:02:27.933 --> 00:02:31.833
‫باشر بإنشاء الحلقة عبر بدء
‫المتغير العداد (i) بقيمة صفرية

00:02:32.233 --> 00:02:33.633
‫قبل كل تطبيق للحلقة..

00:02:33.833 --> 00:02:37.833
‫فإننا نختبر إذا كان شرط i أصغر من طول
‫earthquakeArray لا يزال يساوي True

00:02:38.067 --> 00:02:41.167
‫إن كانت True، فإننا ننفذ
‫كل الكود في الحلقة

00:02:41.767 --> 00:02:44.801
‫بنهاية كل تطبيق، نزيد قيمة i واحداً

00:02:44.933 --> 00:02:47.133
‫والمشار إليه بالتركيب ++i

00:02:47.233 --> 00:02:49.100
‫ثم يمكننا تكرار تطبيق الحلقة

00:02:49.600 --> 00:02:53.733
‫ثم بعدها يمكننا جلب كائن JSON في الموضع
‫المحدد من earthquakeArray

00:02:53.867 --> 00:02:57.767
‫ونبدأ من الموضع صفر..
‫وهو القيمة الأولية لمتغير العداد i

00:02:58.233 --> 00:03:00.200
‫ما أن نملك كائن JSON للزلزال الحالي..

00:03:00.300 --> 00:03:03.533
‫يمكننا استخراج كائن JSON
‫المقترن بمفتاح الخواص

00:03:04.200 --> 00:03:06.767
‫تذكر أن هذا يسرد سمات كثيرة للزلازل

00:03:07.300 --> 00:03:11.233
‫كما ترى، فهذه الكائنات دفينة
‫في أعماق الاستجابة

00:03:11.533 --> 00:03:16.333
‫ولكن أخيراً، فإننا في مستوى يمكننا
‫الوصول فيه إلى القيم لكائن الخواص..

00:03:16.467 --> 00:03:18.867
‫بالإشارة إلى المفتاح mag
‫اختصاراً (للقوة)

00:03:19.100 --> 00:03:20.400
‫المكان للموقع..

00:03:20.767 --> 00:03:23.667
‫والوقت لوقت حدوث الزلزال بالملي ثانية

00:03:24.267 --> 00:03:28.434
‫يمكننا للوقت الراهن استخراج هذه القيم
‫كسلاسل حرفية لأننا نعرضهم على الشاشة..

00:03:28.667 --> 00:03:31.534
‫ولا نجري أي حسابات أو تنسيقات عليها

00:03:31.900 --> 00:03:35.200
‫ثم يمكننا إنشاء كائن زلازل جديد
‫من هذه العبارات الثلاث

00:03:35.500 --> 00:03:38.667
‫وأخيراً فإننا نريد إضافة
‫الزلزال إلى القائمة

00:03:39.133 --> 00:03:43.000
‫بعد أن تنتهي الحلقة من التنفيذ مرة
‫لكل زلزال في مصفوفة الخصائص..

00:03:43.133 --> 00:03:45.533
‫سنبني قائمة مصفوفة كاملة بكل الزلازل

00:03:46.033 --> 00:03:48.766
‫ثم نُجيب بهذه القائمة
‫كقيمة إجابة للوظيفة.

00:03:49.167 --> 00:03:52.700
‫عمل رائع. كان هذا تحدياً صعباً
‫شمل تراكيب جافا لغوية كثيرة

00:03:52.767 --> 00:03:54.600
‫فكن فخوراً بنفسك لأنك حللته

00:03:54.800 --> 00:03:57.267
‫سأعود الآن لإضافة بعض
‫التعليقات إلى الكود

00:03:57.633 --> 00:03:59.000
‫هذا رائع ويبدو جيداً

00:03:59.167 --> 00:04:01.100
‫لنختبر الآن الكود باستدعاء الوظيفة

00:04:01.400 --> 00:04:04.767
‫في الخطوة الثالثة من الاختبار،
‫طلبت منك تعديل نشاط (الزلزال)

00:04:04.867 --> 00:04:07.567
‫لاستدعاء QueryUtils ووظيفة
‫extractEarthquakes

00:04:08.033 --> 00:04:11.766
‫في هذا الملف، سنحذف قائمة مصفوفة
‫الزلازل الزائفة المنشأة سابقاً

00:04:11.967 --> 00:04:13.767
‫ولنستدعي QueryUtils الآن

00:04:14.267 --> 00:04:17.967
‫لا توجد أخطاء في الكود، لذا لنشغله
‫على جهازنا ونرى ما يحدث

00:04:18.233 --> 00:04:20.633
‫مذهل، تطبيقنا يعرض قائمة الزلازل

00:04:20.933 --> 00:04:25.100
‫يفترض به أن يبدو كالتصميم الذي رسمته
‫آنفاً عندما فسرت الاستجابة يدوياً

00:04:25.400 --> 00:04:29.000
‫إن أردت الرجوع لأي كود أريته لك،
‫تفقد الملاحظات و(فارق الكود)

