<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Magnitude as a Decimal Value</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>JSON Parsing</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Earthquake at the Coffee Shop.html">01. Earthquake at the Coffee Shop</a>
    </li>
    <li class="">
      <a href="02. Where to Find Earthquake Data .html">02. Where to Find Earthquake Data? </a>
    </li>
    <li class="">
      <a href="03. Receiving Mocks from Our Designer.html">03. Receiving Mocks from Our Designer</a>
    </li>
    <li class="">
      <a href="04. Course Map.html">04. Course Map</a>
    </li>
    <li class="">
      <a href="05. Explore USGS Website As A User.html">05. Explore USGS Website As A User</a>
    </li>
    <li class="">
      <a href="06. Drive-Through Data.html">06. Drive-Through Data</a>
    </li>
    <li class="">
      <a href="07. Explore USGS Website As A Developer.html">07. Explore USGS Website As A Developer</a>
    </li>
    <li class="">
      <a href="08. Import Existing Project.html">08. Import Existing Project</a>
    </li>
    <li class="">
      <a href="09. Checking the build.gradle file.html">09. Checking the build.gradle file</a>
    </li>
    <li class="">
      <a href="10. Solution Code on GitHub.html">10. Solution Code on GitHub</a>
    </li>
    <li class="">
      <a href="11. Show more info on each earthquake.html">11. Show more info on each earthquake</a>
    </li>
    <li class="">
      <a href="12. Overview of JSON.html">12. Overview of JSON</a>
    </li>
    <li class="">
      <a href="13. JSON Components.html">13. JSON Components</a>
    </li>
    <li class="">
      <a href="14. Traverse Nodes in JSON Object Tree.html">14. Traverse Nodes in JSON Object Tree</a>
    </li>
    <li class="">
      <a href="15. Parsing JSON in Android.html">15. Parsing JSON in Android</a>
    </li>
    <li class="">
      <a href="16. Look at Earthquake Query Result.html">16. Look at Earthquake Query Result</a>
    </li>
    <li class="">
      <a href="17. Traversing Earthquake JSON Object Tree.html">17. Traversing Earthquake JSON Object Tree</a>
    </li>
    <li class="">
      <a href="18. Parse JSON response in Quake Report app.html">18. Parse JSON response in Quake Report app</a>
    </li>
    <li class="">
      <a href="19. Display date and time of earthquake.html">19. Display date and time of earthquake</a>
    </li>
    <li class="">
      <a href="20. Quiz Display date and time of earthquake.html">20. Quiz: Display date and time of earthquake</a>
    </li>
    <li class="">
      <a href="21. Split location into 2 TextViews.html">21. Split location into 2 TextViews</a>
    </li>
    <li class="">
      <a href="22. Magnitude as a Decimal Value.html">22. Magnitude as a Decimal Value</a>
    </li>
    <li class="">
      <a href="23. Switch Statement.html">23. Switch Statement</a>
    </li>
    <li class="">
      <a href="24. Circle Background for Magnitude.html">24. Circle Background for Magnitude</a>
    </li>
    <li class="">
      <a href="25. Visual Polish.html">25. Visual Polish</a>
    </li>
    <li class="">
      <a href="26. Add Earthquake Intent.html">26. Add Earthquake Intent</a>
    </li>
    <li class="">
      <a href="27. Reflection.html">27. Reflection</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">22. Magnitude as a Decimal Value</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3><p>Magnitude as a Decimal Value</p></h3>
  <div>
  <p>If you’ve seen the magnitude values in the JSON responses from the server, you’ll notice that sometimes they come in the form of one or two decimal places, such as “7.2” or “7.29”. However, according to our design mocks we prefer to display magnitude as a String with one decimal place (i.e. “7.2”), so that the magnitude value can be shown centered within a nice colored circle.</p>
<p><img src="media/unnamed-160977-0.gif" width=200></p>
<h3 id="decimalformat">DecimalFormat</h3>
<p>Guess what? There’s a class in Android that can help us! It’s called the <a href="https://developer.android.com/reference/java/text/DecimalFormat.html?utm_source=udacity&utm_medium=course&utm_campaign=android_basics" target="_blank">DecimalFormat</a> class. Just to let you know, there’s also the <a href="https://developer.android.com/reference/java/text/NumberFormat.html?utm_source=udacity&utm_medium=course&utm_campaign=android_basics" target="_blank">NumberFormat</a> class that handles formatting all types of numbers, but it’s an abstract class, so DecimalFormat is a concrete class that we can interact with.</p>
<p>To initialize a DecimalFormat object, you pass in a format string matching a defined pattern (similar to the year, month, date symbols for the SimpleDateFormat class). There are special symbols with a specific meaning (i.e. 0 means a placeholder for a digit, # also means a digit but leading zeros are not shown). The full list is shown in a table on the <a href="https://developer.android.com/reference/java/text/DecimalFormat.html?utm_source=udacity&utm_medium=course&utm_campaign=android_basics" target="_blank">DecimalFormat</a>  documentation page.</p>
<p>Here’s an example where we use the <a href="<a href="https://developer.android.com/reference/java/text/DecimalFormat.html?utm_source=udacity&utm_medium=course&utm_campaign=android_basics#format(java.lang.Object" rel="noopener noreferrer" target="_blank">https://developer.android.com/reference/java/text/DecimalFormat.html?utm_source=udacity&utm_medium=course&utm_campaign=android_basics#format(java.lang.Object</a>, java.lang.StringBuffer, java.text.FieldPosition)" target="_blank"&gt;DecimalFormat format method</a>. </p>
<pre><code> DecimalFormat formatter = new DecimalFormat("0.00");
 String output = formatter.format(2.3234);</code></pre>
<p>Since we specified the DecimalFormat to show 3 digits (“0.00”), formatting a decimal like 2.3234 will truncate down to two decimal places and output a String value of “2.32”.</p>
<p>You may need to import this class at the top of the file, if it doesn’t automatically import.</p>
<pre><code> import java.text.DecimalFormat;</code></pre>
<h3 id="double-data-type">Double data type</h3>
<p>You may have noticed that the DecimalFormat format() method takes a double value as input. “Double” is another primitive data type in Java. You can think of it as a decimal value, compared to the “int” data type which is a whole number.</p>
<p>Note: If you want to be more efficient with storing decimal values, you can also use the “float” data type for decimals. The nuances between “float” and double” are in the official Java documentation site <a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html" target="_blank">here</a>.</p>
<h3 id="your-turn">Your Turn</h3>
<p>In this upcoming quiz, you will store magnitude as a double data type. This starts by extracting the decimal magnitude value as a double when parsing the JSON response.</p>
<p>In QueryUtils extractEarthquakes():</p>
<pre><code> // Extract the value for the key called "mag"
 double magnitude = properties.getDouble("mag");</code></pre>
<p>This will cause a ripple effect in other parts of the app, and you’ll need to update the Earthquake class, for example, to handle storing a double value for magnitude. Also, in the EarthquakeAdapter, when you try to display the magnitude, use the DecimalFormat class to format the magnitude so only one decimal place is shown. Good luck!</p>
<p><img src="media/unnamed-160977-1.gif" width=200></p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Magnitude as a Decimal Value</p></h3>
  <div>
  <form>
    <fieldset>
      <legend><p>Store magnitude of each earthquake as a double data type and Format magnitude to display to the user:</p></legend>
    </fieldset>

    <div>
      <input type="checkbox" value="a1468980050296" name="160979" id="a1468980050296">
      <label for="a1468980050296"><p>In the QueryUtils class, extract magnitude as a double when parsing the JSON response</p></label>
    </div>
    <div>
      <input type="checkbox" value="a1468980052240" name="160979" id="a1468980052240">
      <label for="a1468980052240"><p>In the Earthquake class, store magnitude as a double</p></label>
    </div>
    <div>
      <input type="checkbox" value="a1468980052914" name="160979" id="a1468980052914">
      <label for="a1468980052914"><p>In the EarthquakeAdapter class, use DecimalFormat so that one decimal place is always shown</p></label>
    </div>
  </form>

  <details>
    <summary><strong>SOLUTION:</strong></summary>
    <ul>
      <li> In the QueryUtils class, extract magnitude as a double when parsing the JSON response</li>
      <li> In the Earthquake class, store magnitude as a double</li>
      <li> In the EarthquakeAdapter class, use DecimalFormat so that one decimal place is always shown</li>
  </ul>
  </details>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Magnitude as a Decimal Value - Solution</p></h3>
  <div>
  <p>First you should have modified the way that we parse the magnitude value from the JSON response, so that we have a double value.</p>
<p>In QueryUtils extractEarthquakes():</p>
<pre><code> // Extract the value for the key called "mag"
 double magnitude = properties.getDouble("mag");</code></pre>
<p>Android Studio will display an error because we can’t pass a double value into the Earthquake constructor, so we need to update the Earthquake class. Inside the Earthquake class:<br />
the magnitude global variable should be a double<br />
the constructor should accept a double value as input <br />
and the magnitude getter method should return a double. </p>
<p>Note that the ellipsis (…) means that we’ve omitted parts of the code so that the code changes are easier to see, but the other parts of the code are still there if you check the full file.</p>
<p>In Earthquake.java:</p>
<pre><code> /** Magnitude of the earthquake */
 private double mMagnitude;

 …

 /**
  * Constructs a new {@link Earthquake} object.
  *
  * @param magnitude is the magnitude (size) of the earthquake
  * @param location is the location where the earthquake happened
  * @param timeInMilliseconds is the time in milliseconds (from the Epoch) when the
  *                           earthquake happened
  */
 public Earthquake(double magnitude, String location, long timeInMilliseconds) {
     mMagnitude = magnitude;
     mLocation = location;
     mTimeInMilliseconds = timeInMilliseconds;
 }

 …

 /**
  * Returns the magnitude of the earthquake.
  */
 public double getMagnitude() {
     return mMagnitude;
 }</code></pre>
<p>Another advantage to storing the earthquake magnitude as a double is that we can do math calculations easily. For example, if we wanted to find the average magnitude of all the earthquakes, we can easily sum up all the magnitudes and divide by the number of earthquakes. We wouldn’t be able to do math calculations if the magnitude values were text Strings. </p>
<p>In the EarthquakeAdapter, we can format the decimal value into whatever is needed by the UI. In our case, we just want to show one decimal place. We created a helper method called formatMagnitude() that takes a double value as input and returns the formatted string. The helper method initializes a DecimalFormat object instance with the pattern string “0.0”. Then in the getView() method of the adapter, we can read the magnitude value from the current Earthquake object, format the decimal into a string, and then update the TextView to display the value.</p>
<p>In EarthquakeAdapter.java:</p>
<pre><code> import java.text.DecimalFormat;

 …

 @Override
 public View getView(int position, View convertView, ViewGroup parent) {

     …

     // Find the TextView with view ID magnitude
     TextView magnitudeView = (TextView) listItemView.findViewById(R.id.magnitude);
     // Format the magnitude to show 1 decimal place
     String formattedMagnitude = formatMagnitude(currentEarthquake.getMagnitude());
     // Display the magnitude of the current earthquake in that TextView
     magnitudeView.setText(formattedMagnitude);

     …
 }

 /**
  * Return the formatted magnitude string showing 1 decimal place (i.e. "3.2")
  * from a decimal magnitude value.
  */
 private String formatMagnitude(double magnitude) {
     DecimalFormat magnitudeFormat = new DecimalFormat("0.0");
     return magnitudeFormat.format(magnitude);
 }</code></pre>
<p>The app should look like this when you’re done.</p>
<p><img src="media/unnamed-160980-0.gif" width=200></p>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="23. Switch Statement.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('22. Magnitude as a Decimal Value')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
